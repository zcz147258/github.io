<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>React | mikasa</title><meta name="keywords" content="React"><meta name="author" content="mikasa"><meta name="copyright" content="mikasa"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="React">
<meta property="og:type" content="article">
<meta property="og:title" content="React">
<meta property="og:url" content="http://yoursite.com/2020/11/30/react/index.html">
<meta property="og:site_name" content="mikasa">
<meta property="og:description" content="React">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2431606259,2554064138&fm=26&gp=0.jpg">
<meta property="article:published_time" content="2020-11-30T07:28:45.952Z">
<meta property="article:modified_time" content="2020-11-30T08:52:45.649Z">
<meta property="article:author" content="mikasa">
<meta property="article:tag" content="Java,JavaScript,Node,Json,Sql,前端,数据库,后端">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2431606259,2554064138&fm=26&gp=0.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://yoursite.com/2020/11/30/react/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'mediumZoom',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}

// https://stackoverflow.com/questions/16839698/jquery-getscript-alternative-in-native-javascript
const getScript = url => new Promise((resolve, reject) => {
  const script = document.createElement('script')
  script.src = url
  script.async = true
  script.onerror = reject
  script.onload = script.onreadystatechange = function() {
    const loadState = this.readyState
    if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
    script.onload = script.onreadystatechange = null
    resolve()
  }
  document.head.appendChild(script)
})</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-11-30 16:52:45'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/index/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">57</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/source/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fas fa-video"></i><span> 游戏</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-video"></i><span> 书籍</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2431606259,2554064138&amp;fm=26&amp;gp=0.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">mikasa</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fas fa-video"></i><span> 游戏</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-video"></i><span> 书籍</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">React</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-11-30T07:28:45.952Z" title="发表于 2020-11-30 15:28:45">2020-11-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-11-30T08:52:45.649Z" title="更新于 2020-11-30 16:52:45">2020-11-30</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/source/categories/React/">React</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">10.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>51分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="一-react简介"><a href="#一-react简介" class="headerlink" title="一.react简介"></a>一.react简介</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">起源于 facebook 的内部项目   ins</span><br></pre></td></tr></table></figure>

<h1 id="二-React和vue的对比"><a href="#二-React和vue的对比" class="headerlink" title="二.React和vue的对比"></a>二.React和vue的对比</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1.组件化方面</span><br><span class="line">	模块化  代码角度   复用的代码，抽离为单个模块，便于开发和维护</span><br><span class="line">	组件化  UI界面角度</span><br><span class="line">	</span><br><span class="line">	Vue  </span><br><span class="line">		.vue创建组件  </span><br><span class="line">				template 结构 </span><br><span class="line">				script 行为  </span><br><span class="line">                style  样式 </span><br><span class="line">	React </span><br><span class="line">		有组件化的概念，一切都是以  js来表现得</span><br><span class="line">2.开发团队</span><br><span class="line">	facebook</span><br><span class="line">	尤雨溪</span><br><span class="line">	</span><br><span class="line">3.移动app的开发体验</span><br><span class="line">	Vue   Weex</span><br><span class="line">	React  ReactNative</span><br></pre></td></tr></table></figure>

<h1 id="三-虚拟Dom"><a href="#三-虚拟Dom" class="headerlink" title="三.虚拟Dom"></a>三.虚拟Dom</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Dom的本质是什么，浏览器中的概念，用js对象来表示页面上的元素，并且提供了操作Dom的Api</span><br><span class="line"></span><br><span class="line">什么是虚拟Dom  用js来模拟页面上的DOM和DOM嵌套</span><br><span class="line"></span><br><span class="line">为什么要实现虚拟DOM 为了实现页面中 Dom的高效更新</span><br></pre></td></tr></table></figure>

<h2 id="3-1DOM树的概念"><a href="#3-1DOM树的概念" class="headerlink" title="3.1DOM树的概念"></a>3.1DOM树的概念</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">一个网页呈现的过程</span><br><span class="line">1.浏览器请求服务器获取页面HTML代码</span><br><span class="line">2.浏览器在内存中 解析DOM树，并且在浏览器内存中，渲染出一颗DOM树</span><br><span class="line">3.浏览器把DOM树，呈现到页面上</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="3-2虚拟DOM"><a href="#3-2虚拟DOM" class="headerlink" title="3.2虚拟DOM"></a>3.2虚拟DOM</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">获取到内存中的新旧两颗DOM树，进行对比，得到需要按需更新的DOM元素</span><br><span class="line">程序员可以模拟新旧两颗DOM树，</span><br><span class="line"></span><br><span class="line"> 用js来模拟新旧两颗DOM树</span><br><span class="line"> 模拟的两颗新旧DOM树，就是虚拟DOM</span><br><span class="line"> </span><br><span class="line"> 目地：实现页面元素的高效更新</span><br><span class="line"> </span><br><span class="line"> 本质：用js对象来模拟元素和嵌套关系</span><br></pre></td></tr></table></figure>

<h1 id="四-DIff算法"><a href="#四-DIff算法" class="headerlink" title="四.DIff算法"></a>四.DIff算法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tree diff     新旧两颗DOM树，逐层对比的过程</span><br><span class="line">component diff  每一层中 组件级别的对比 组件相同不需要更新，不同删除旧的，创建新的组件</span><br><span class="line">element diff  如果两个组件类型相同，那么就需要元素级别的对比</span><br></pre></td></tr></table></figure>

<h1 id="五-在项目中使用react"><a href="#五-在项目中使用react" class="headerlink" title="五.在项目中使用react"></a>五.在项目中使用react</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cnpm i react ract-dom -S</span><br><span class="line">安装react包</span><br><span class="line">react   创建组件和虚拟Dom的</span><br><span class="line">react-dom  专门进行操作dom的，最主要的场景就是 ReactDOM.render()</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import React from &#39;react&#39;</span><br><span class="line">import ReactDOM from &#39;react-dom&#39;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;创建虚拟DOM</span><br><span class="line">	&#x2F;&#x2F;参数1   创建元素的类型，字符串，表示元素的名称</span><br><span class="line">	&#x2F;&#x2F;参数2   是一个对象或者null  表示整个DOm元素的属性</span><br><span class="line">	&#x2F;&#x2F;参数3   子节点(包括其他虚拟DOM或者文本子节点)</span><br><span class="line">	&#x2F;&#x2F;参数4    其他子节点</span><br><span class="line">const myh1 &#x3D; React.createElement(&#39;h1&#39;,null,&#39;这是一个大大H1&#39;)</span><br><span class="line"></span><br><span class="line">使用 reactdom 把虚拟dom渲染到页面上</span><br><span class="line">&#x2F;&#x2F;参数1   要渲染那个虚拟dom元素</span><br><span class="line">&#x2F;&#x2F;参数2   指定页面上的一个容器</span><br><span class="line"></span><br><span class="line">React.render(myh1,document.getElementByid(&#39;app&#39;)); </span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">渲染页面shang的DOM结构，最好的方式  写HTML代码</span><br></pre></td></tr></table></figure>

<h1 id="六-JSX"><a href="#六-JSX" class="headerlink" title="六.JSX"></a>六.JSX</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">在js中不能写 HTML代码</span><br><span class="line">解决问题可以写  </span><br><span class="line">babel 来转化js中的标签</span><br><span class="line"></span><br><span class="line">在js中，写入混合的HTML的代码，叫做JSX的语法</span><br><span class="line"></span><br><span class="line">如何启用jsx语法</span><br><span class="line">1.安装 babel插件 </span><br><span class="line">	cnpm i babel-core babel-loader babel-plugin-transform-runtime  -D</span><br><span class="line">	cnpm  i babel-preset-env  babel-preset-stage-0 -D</span><br><span class="line">安装能够识别 jsx语法的包</span><br><span class="line">	babel-preset-react</span><br><span class="line">	cnpm i babel-preset-react</span><br><span class="line">	</span><br><span class="line">2.webpack-config-js 中</span><br><span class="line">	rules;[</span><br><span class="line">        &#123; test: &#x2F;\.js|jsx$&#x2F;,user :&#39;babel-loader&#39;,exclude:&#x2F;node_modules&#x2F; &#125;</span><br><span class="line">	]</span><br><span class="line">3.项目根目录创建一个 .babelrc</span><br><span class="line">	json配置文件</span><br><span class="line">	&#123;</span><br><span class="line">        “preset”: [&quot;env&quot;,&quot;stage-0&quot;,&quot;react&quot;],</span><br><span class="line">        &quot;plugins&quot;: [&quot;transform-runtime&quot;]</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-1语法"><a href="#6-1语法" class="headerlink" title="6.1语法"></a>6.1语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">let a &#x3D;10</span><br><span class="line">ReactDOM.render(&lt;div&gt;&#123;a&#125;&lt;&#x2F;div&gt;),document.getElementById(&#39;app&#39;)</span><br><span class="line"></span><br><span class="line">花括号可以写入 </span><br><span class="line">		数字      10</span><br><span class="line">		字符串    ‘dsada’</span><br><span class="line">        布尔值     false</span><br><span class="line">		属性绑定值   title&#x3D;&#39;999&#39;              title &#x3D; &#123;title&#125;</span><br><span class="line">		渲染jsx元素  h1 &#x3D; &lt;h1&gt;红红火炬哦&lt;&#x2F;h1&gt;</span><br><span class="line">		渲染jsx数组	[&lt;h1&gt;红红火炬哦&lt;&#x2F;h1&gt;,&lt;h2&gt;红红火炬哦&lt;&#x2F;h2&gt;,&lt;h3&gt;红红火炬哦&lt;&#x2F;h3&gt;]</span><br><span class="line">		将普通字符数组转为jsx数组并且渲染到页面上</span><br><span class="line">			</span><br><span class="line">			方法1</span><br><span class="line">				const arr &#x3D; [&#39;我是&#39;,&#39;校长&#39;,&#39;教师&#39;,&#39;老师&#39;,&#39;师傅&#39;],</span><br><span class="line">				const nameArr &#x3D; [];</span><br><span class="line">				arr.forEach(item &#x3D; &gt;&#123;</span><br><span class="line">                    const temp &#x3D; &lt;h1&gt; &#123; item &#125; &lt;&#x2F;h1&gt;</span><br><span class="line">                    nameArr.push(temp)</span><br><span class="line">				&#125;)</span><br><span class="line">				然后渲染到页面</span><br><span class="line">			</span><br><span class="line">			方法2</span><br><span class="line">				内部for循环</span><br><span class="line">				&#123;arr.map(item &#x3D; &gt;&#123;</span><br><span class="line">                    retrun &lt;h3 key&#x3D;&#123;id&#125;&gt;&#123;item&#125;&lt;&#x2F;h3&gt; </span><br><span class="line">				&#125;)&#125;</span><br><span class="line">				</span><br></pre></td></tr></table></figure>

<h2 id="6-2KEY"><a href="#6-2KEY" class="headerlink" title="6.2KEY"></a>6.2KEY</h2><p>如果  v-for  map 循环的时候，如果需要保存状态的时候，必须用key</p>
<h2 id="6-3注意事项"><a href="#6-3注意事项" class="headerlink" title="6.3注意事项"></a>6.3注意事项</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">注释</span><br><span class="line">	&#123;&#x2F;*     *&#x2F;&#125;</span><br><span class="line">标签必须成对出现</span><br><span class="line"></span><br><span class="line">元素class类名用 className代替</span><br><span class="line">htmlfor 替换 label 的 for  属性</span><br><span class="line"></span><br><span class="line">jsx创建的DOM中 所有的节点，必须有唯一的根元素进行包裹</span><br></pre></td></tr></table></figure>

<h1 id="七-展开运算符…"><a href="#七-展开运算符…" class="headerlink" title="七 展开运算符…"></a>七 展开运算符…</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const dog &#x3D; &#123;</span><br><span class="line">    name: &#39;大黄&#39;,</span><br><span class="line">    age: 3,</span><br><span class="line">    gender: &#39;雄&#39;</span><br><span class="line">&#125;</span><br><span class="line">&lt;h1 &#123; ...dog &#125;&gt;&lt;&#x2F;h1&gt;   就可以渲染</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const dog2 &#x3D; &#123;</span><br><span class="line">    class: sdada</span><br><span class="line">    ...dog</span><br><span class="line">&#125;  就可以实现赋值</span><br></pre></td></tr></table></figure>

<h1 id="八-组件化"><a href="#八-组件化" class="headerlink" title="八.组件化"></a>八.组件化</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1.父组件向子组件传值</span><br><span class="line">2.使用&#123; ...obj &#125; 属性扩散传递数据</span><br><span class="line">3.是组件封装到单独的文件中‘</span><br><span class="line">4.组件的名称首字母必须是大写</span><br><span class="line"></span><br><span class="line">function Hello()&#123;</span><br><span class="line">    return &lt;h1&gt;的撒老大&lt;&#x2F;h1&gt;</span><br><span class="line">&#125;</span><br><span class="line">render(&lt;hello&gt;&lt;&#x2F;hello&gt;)</span><br><span class="line"></span><br><span class="line">抽离成一个文件</span><br><span class="line">	jsx  组件</span><br><span class="line">然后导入React</span><br><span class="line"></span><br><span class="line">webpack   </span><br><span class="line">	resolve中配置   .jsx  就可以省略不写</span><br><span class="line">	resolve   alias   @   &#x3D;  .&#x2F;src  配置路径</span><br></pre></td></tr></table></figure>

<h2 id="8-1第二种创建组件方式class"><a href="#8-1第二种创建组件方式class" class="headerlink" title="8.1第二种创建组件方式class"></a>8.1第二种创建组件方式class</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">class Animal()&#123;</span><br><span class="line">	&#x2F;&#x2F;构造器 每一个类中都有  new的时候就会执行  构造器的代码</span><br><span class="line">    constructor(name,age)&#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">        this.age &#x3D; age</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;静态属性</span><br><span class="line">    static info &#x3D; &#39;aaa&#39;</span><br><span class="line">    &#x2F;&#x2F;实例方法</span><br><span class="line">    chi()&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;静态方法</span><br><span class="line">    static sleep()&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">const al &#x3D; new Animal(&#39;大黄&#39;,3)</span><br><span class="line"></span><br><span class="line">	静态属性  通过构造函数 直接访问到的属性</span><br><span class="line">Animal.gender &#x3D; ’男‘	</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;注意点</span><br><span class="line">	内部只能写  构造器  实例方法  静态方法和静态属性</span><br><span class="line">	class内部 还是function实现 语法糖</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	子类继承父类  extends</span><br><span class="line">	 在子类的构造期内  必须优先调用 super()</span><br><span class="line">	 super就是父类的构造器  super(name,age)</span><br><span class="line">	 </span><br><span class="line">	 为子类挂载独有的方法</span><br><span class="line">	 方法super()方法之后  this.idcard &#x3D; card</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">class 组件名 extends  React.Component()&#123;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return &lt;div&gt;class创建的组件&lt;&#x2F;div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">组件传值</span><br><span class="line"></span><br><span class="line">子组件直接   &#123;this.props.name&#125;  就可以访问传过来的属性  this标识当前组件实例对象</span><br><span class="line"></span><br><span class="line">组件传值的属性的值 都是只读的 </span><br><span class="line"></span><br><span class="line">对比  class  和 function()&#123;&#125;的区别</span><br><span class="line">	</span><br><span class="line">	class创建组件有自己的私有数据  和生命周期函数</span><br><span class="line">	function创建的组件只有props，没有私有数据和生命周期函数</span><br><span class="line">	</span><br><span class="line">	constructor()&#123;</span><br><span class="line">        super();</span><br><span class="line">        this.state &#x3D; &#123;</span><br><span class="line">            msg:’大家好‘</span><br><span class="line">        &#125;  &#x2F;&#x2F;相当于 vue的  data</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	访问属性 就是 this.state.msg  也可以修改  this.state.msg &#x3D; &quot;修改后&quot;</span><br><span class="line">	</span><br><span class="line">	路径问题优化</span><br><span class="line">			放绝对路径  @&#x2F;components&#x2F;item</span><br></pre></td></tr></table></figure>

<h2 id="8-2高阶函数和高阶组件"><a href="#8-2高阶函数和高阶组件" class="headerlink" title="8.2高阶函数和高阶组件"></a>8.2高阶函数和高阶组件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">高阶函数</span><br><span class="line">	1.接受函数类型的参数</span><br><span class="line">	2.返回值式函数</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;定时器  Promise  数组遍历的方法   函数对象的bind</span><br><span class="line">高阶组件</span><br><span class="line">	1.本质是一个函数</span><br><span class="line">	2.接受一个组件，返回一个组件</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;例如 Form.create()(Login)</span><br></pre></td></tr></table></figure>



<h1 id="九-样式"><a href="#九-样式" class="headerlink" title="九.样式"></a>九.样式</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">jsx中 </span><br><span class="line">	写行内样式</span><br><span class="line">		数字类型不用 引号  字符串类型的值   需要用引号</span><br><span class="line">		style &#x3D; &#123;&#123; color: &#39;red&#39; &#125;&#125;</span><br><span class="line">	className&#x3D;&quot;title&quot;</span><br><span class="line">	</span><br><span class="line">	引入样式表  在全局生效   默认没有独立作用域</span><br><span class="line">	import   obj  from &#39;css&#39;</span><br><span class="line">	React中类似的 scoped</span><br><span class="line">	css-loader?modules   表示为普通的css样式表  启动模块化</span><br><span class="line">	css模块化  也支持 类选择器  和  ID选择器生效  不会对标签模块化</span><br><span class="line">	使用   obj.title</span><br><span class="line">	</span><br><span class="line">	id &#x3D; &#123; obj.title2 &#125;</span><br><span class="line">	</span><br><span class="line">	自定义模块化的类型</span><br><span class="line">	css-loader?modules&amp;localidentName&#x3D;[path][name]-[local]-[hash:5]</span><br><span class="line">	</span><br><span class="line">	不想被模块化</span><br><span class="line">	:local   会被模块化</span><br><span class="line">	:global(.test)&#123;   不会被模块化</span><br><span class="line">        color；red</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	使用 多个类名 </span><br><span class="line">		&#123;obj.title + &#39;test&#39;&#125;</span><br><span class="line">		&#123;[obj.title,&#39;test&#39;].join(&#39; &#39;)&#125;</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">	在项目中 用 less 或者 scss  </span><br><span class="line">	引入 bootstrap 的样式</span><br><span class="line">	import  bootcss from &#39;bootstrap&#x2F;dist&#x2F;css&#x2F;bootstrap.css&#39;</span><br><span class="line">	</span><br><span class="line">	我们可以自己规定</span><br><span class="line">		第三方的样式表都是css</span><br><span class="line">		自己的样式表都是 scss 或者 less</span><br></pre></td></tr></table></figure>

<h1 id="十-绑定事件"><a href="#十-绑定事件" class="headerlink" title="十.绑定事件"></a>十.绑定事件</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">事件的首字母必须大写  onMouseover</span><br><span class="line">&lt;button onClick&#x3D;&#123;function()&#123;&#125;&#125;&gt;&lt;&#x2F;button&gt;  或者 this.myevent   不加括号</span><br><span class="line"></span><br><span class="line">标准用法 </span><br><span class="line">	&lt;button onClick&#x3D;&#123; () &#x3D;&gt; this.show(参数) &#125;&gt;&lt;&#x2F;button&gt;</span><br><span class="line">	</span><br><span class="line">	show &#x3D; (参数) &#x3D;&gt;&#123;</span><br><span class="line">        console.log(1)</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	修改state</span><br><span class="line">	this.state.msg &#x3D; &#39;000&#39;  可以改变state 但是页面上却没有改变</span><br><span class="line">	重新赋值需要</span><br><span class="line">		this.setState(&#123;</span><br><span class="line">            msg: &#39;123&#39;</span><br><span class="line">		&#125;)</span><br><span class="line">	注意点</span><br><span class="line">		1.setstate只会把 state状态更新，不会覆盖其他的state</span><br><span class="line">		2.SetState方法是一个异步的，用回调函数来拿到最新的值</span><br><span class="line">			this.SetStae(&#123;&#125;,function()&#123;</span><br><span class="line">                console.log(&#39;最新的值&#39;)</span><br><span class="line">			&#125;)</span><br><span class="line">绑定文本框</span><br><span class="line">	单向数据流通 和上面类似</span><br><span class="line">	双向绑定  修改文本框 自动同步值</span><br><span class="line">	1.e.target.value</span><br><span class="line">	&lt;input onChange&#x3D;&#123;(e) &#x3D; &gt; this.txtChange(e)&#125; &#x2F;&gt;   要么提供一个readonly    要么提供一个 onChange函数	</span><br><span class="line">	txtChange &#x3D; (e)&#x3D;&gt;&#123;</span><br><span class="line">        console.log(e.target.value)</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">            msg: e.target.value</span><br><span class="line">        &#125;)</span><br><span class="line">	&#125;</span><br><span class="line">	2.this.refs.txt.value</span><br></pre></td></tr></table></figure>

<h1 id="十一-生命周期"><a href="#十一-生命周期" class="headerlink" title="十一.生命周期"></a>十一.生命周期</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">生命周期流程</span><br><span class="line">	1.第一次初始化渲染显示：ReactDOM.render()</span><br><span class="line">			constructor()  创建初始化 state</span><br><span class="line">			componentWillMount()   将要插入回调</span><br><span class="line">			render()   用于插入虚拟DOM回调</span><br><span class="line">			componentDidMount()  已经插入回调</span><br><span class="line">	2.每次更新state  this.setState()</span><br><span class="line">		componentWillUpdate()   将要更新回调</span><br><span class="line">		render()   更新  重新渲染</span><br><span class="line">		componentDidUpdate()   已经更新回调</span><br><span class="line">	3.移除组件</span><br><span class="line">		ReactDom.unmountcomponentAtNode(Dom)</span><br><span class="line">        componentWillUnmount()  组件将要被移除  回调</span><br></pre></td></tr></table></figure>

<h1 id="十二-脚手架创建"><a href="#十二-脚手架创建" class="headerlink" title="十二.脚手架创建"></a>十二.脚手架创建</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">用 creat-react-app创建 app应用</span><br><span class="line">创建项目并且启动</span><br><span class="line">	1.npm install -g create-react-app</span><br><span class="line">	2.create-react-app hello-react</span><br><span class="line">	3.cd hello-react</span><br><span class="line">	4.npm start</span><br></pre></td></tr></table></figure>

<h1 id="十三-使用axios"><a href="#十三-使用axios" class="headerlink" title="十三.使用axios"></a>十三.使用axios</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">index.js 引入</span><br><span class="line"></span><br><span class="line">import axios from &#39;axios&#39;;</span><br><span class="line"></span><br><span class="line">添加到原型上</span><br><span class="line">React.Component.prototype.axios &#x3D; axios;</span><br><span class="line"></span><br><span class="line">组件中直接使用</span><br><span class="line">this.axios.get(&#39;&#x2F;api&#x2F;login&#39;).then().catch()</span><br></pre></td></tr></table></figure>

<h1 id="十四-组件之间的通信"><a href="#十四-组件之间的通信" class="headerlink" title="十四.组件之间的通信"></a>十四.组件之间的通信</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">1.props</span><br><span class="line">2.使用消息订阅  发布 pubSubjs  机制   </span><br><span class="line"></span><br><span class="line">父组件向子组件传值</span><br><span class="line">父组件通过属性进行传递，子组件通过props获取</span><br><span class="line">	&#x2F;&#x2F;父组件</span><br><span class="line">class CommentList extends Component&#123;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return(</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">               &lt;Comment comment&#x3D;&#123;information&#125;&#x2F;&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;子组件</span><br><span class="line">class Comment extends Component&#123;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return(</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;span&gt;&#123;this.props.comment&#125;:&lt;&#x2F;span&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">子组件向父组件传值</span><br><span class="line">	&#x2F;&#x2F;父组件</span><br><span class="line">class CommentApp extends Component&#123;</span><br><span class="line">    constructor()&#123;</span><br><span class="line">        super();</span><br><span class="line">        this.state &#x3D; &#123;comments:[]&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    printContent(comment)&#123;</span><br><span class="line">        this.setState(&#123;comment&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;CommentInput onSubmit&#x3D;&#123;this.printContent.bind(this)&#125; &#x2F;&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;子组件</span><br><span class="line">class CommentInput extends Component&#123;</span><br><span class="line">    constructor()&#123;</span><br><span class="line">        super();</span><br><span class="line">        this.state &#x3D; &#123;</span><br><span class="line">            usrName:&#39;&#39;,</span><br><span class="line">            content:&#39;&#39;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    submit()&#123;</span><br><span class="line">        if(this.props.onSubmit)&#123;</span><br><span class="line">            var &#123;usrName,content&#125; &#x3D; this.state;</span><br><span class="line">            this.props.onSubmit(&#123;usrName,content&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        this.setState(&#123;content:&#39;&#39;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return(</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">               &lt;div&gt;</span><br><span class="line">                   &lt;span&gt;用户名：&lt;&#x2F;span&gt;</span><br><span class="line">                   &lt;div className&#x3D;&quot;usrName&quot;&gt;</span><br><span class="line">                       &lt;input type&#x3D;&quot;text&quot; value&#x3D;&#123;this.state.usrName&#125; &#x2F;&gt;</span><br><span class="line">                  &lt;&#x2F;div&gt;</span><br><span class="line">               &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;span&gt;评论内容：&lt;&#x2F;span&gt;</span><br><span class="line">                    &lt;div className&#x3D;&quot;content&quot;&gt;</span><br><span class="line">                       &lt;textarea value&#x3D;&#123;this.state.content&#125; &#x2F;&gt;</span><br><span class="line">                   &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;button onClick&#x3D;&#123;this.submit.bind(this)&#125;&gt;submit&lt;&#x2F;button&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">兄弟之间传值</span><br><span class="line">	通过发布&#x2F;订阅进行传递</span><br><span class="line">	在子组件A中 commentDidMount函数中，发布事件，在子组件B中commentDidMount函数中对事件进行监听 </span><br></pre></td></tr></table></figure>

<h1 id="十五-React-Router"><a href="#十五-React-Router" class="headerlink" title="十五.React-Router"></a>十五.React-Router</h1><h2 id="15-1路由简介"><a href="#15-1路由简介" class="headerlink" title="15.1路由简介"></a>15.1路由简介</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">4的  版本</span><br><span class="line"></span><br><span class="line">	组件</span><br><span class="line">		&lt;BrowserRouter&gt;</span><br><span class="line">		&lt;HashRouter&gt;</span><br><span class="line">		&lt;Route&gt;</span><br><span class="line">		&lt;Redirect&gt;</span><br><span class="line">		&lt;Link&gt;</span><br><span class="line">		&lt;NavLink&gt;</span><br><span class="line">		&lt;Swtich&gt;</span><br><span class="line">	对象</span><br><span class="line">		history</span><br><span class="line">		match</span><br><span class="line">        withRouter</span><br></pre></td></tr></table></figure>

<h2 id="15-2路由使用"><a href="#15-2路由使用" class="headerlink" title="15.2路由使用"></a>15.2路由使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">下载</span><br><span class="line">	npm install --save react-router-dom</span><br><span class="line">	</span><br><span class="line">	路由组件  views</span><br><span class="line">	非路由组件 components</span><br><span class="line">	</span><br><span class="line">	1.指定视图</span><br><span class="line">        &lt;BrowserRouter&gt;</span><br><span class="line">            &lt;APP &#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;BrowserRouter&gt;</span><br><span class="line">	</span><br><span class="line">        &lt;HashRouter&gt;</span><br><span class="line">            &lt;APP &#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;HashRouter&gt;</span><br><span class="line">    2.在要跳转的位置加</span><br><span class="line">    	&lt;NavLink to&#x3D;&#39;&#x2F;about&#39;&gt;About&lt;&#x2F;NavLink&gt;</span><br><span class="line">    	&lt;NavLink to&#x3D;&#39;&#x2F;about&#39;&gt;Home&lt;&#x2F;NavLink&gt;</span><br><span class="line">    </span><br><span class="line">    3.变化的路由组件显示的部分</span><br><span class="line">    	可以切换的路由组件</span><br><span class="line">    	&lt;Swtich&gt;</span><br><span class="line">    		&#x2F;&#x2F;引入组件</span><br><span class="line">    		&lt;Route path&#x3D;&quot;&#x2F;about&quot; components&#x3D;&#123;About&#125;&#x2F;&gt;</span><br><span class="line">    		&lt;Route path&#x3D;&quot;&#x2F;home&quot; components&#x3D;&#123;Home&#125;&#x2F;&gt;</span><br><span class="line">    	&lt;&#x2F;Swtich&gt;</span><br></pre></td></tr></table></figure>

<h2 id="15-3路由嵌套"><a href="#15-3路由嵌套" class="headerlink" title="15.3路由嵌套"></a>15.3路由嵌套</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">在父路由中指定</span><br><span class="line">	路由链接 &lt;NavLink&gt;</span><br><span class="line">	路由  &lt;Route&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;Route to&#x3D;&#39;&#x2F;home&#x2F;news&#39;&gt;</span><br><span class="line">	&lt;Route to&#x3D;&#39;&#x2F;home&#x2F;messages&#39;&gt;</span><br><span class="line">	点击父路由，子路由显示</span><br><span class="line">	&lt;Redirect to&#x3D;&#39;&#x2F;home&#x2F;news&#39;&gt;</span><br></pre></td></tr></table></figure>

<h2 id="15-4向路由组件传递数据"><a href="#15-4向路由组件传递数据" class="headerlink" title="15.4向路由组件传递数据"></a>15.4向路由组件传递数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">传值</span><br><span class="line">	&lt;a href&#x3D;&#123;&#96;&#x2F;home&#x2F;message&#x2F;messagedetails&#x2F;$&#123;m.id&#125;&#96;&#125;&gt;&#123;m.title&#125;&lt;&#x2F;a&gt;</span><br><span class="line">	&lt;Route  path&#x3D;&quot;&#x2F;home&#x2F;message&#x2F;messagedetails&#x2F;:id&quot; components&#x3D;&#123;MessqgeDetails&#125; &#x2F;&gt;</span><br><span class="line">接受</span><br><span class="line">	const &#123;id&#125; &#x3D; this.props.match.params  &#x2F;&#x2F;获取</span><br><span class="line"></span><br><span class="line">路由链接 和 非路由链接</span><br><span class="line">	因为是 a标签  所以是  非路由链接</span><br></pre></td></tr></table></figure>

<h2 id="15-5完整的书写路由方式"><a href="#15-5完整的书写路由方式" class="headerlink" title="15.5完整的书写路由方式"></a>15.5完整的书写路由方式</h2><p>第一种</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">定义路由跳转的地方和组件信息</span><br><span class="line">			&lt;Sw&gt;</span><br><span class="line">              &lt;Route path&#x3D;&#39;&#x2F;dashboard&#x2F;guide&#39; component&#x3D;&#123;Guide&#125;&#x2F;&gt;</span><br><span class="line">              &lt;Route path&#x3D;&#39;&#x2F;dashboard&#x2F;partner&#39; component&#x3D;&#123;Partner&#125;&#x2F;&gt;</span><br><span class="line">              &lt;Route path&#x3D;&#39;&#x2F;dashboard&#x2F;product&#39; component&#x3D;&#123;Product&#125;&#x2F;&gt;</span><br><span class="line">              &#123;&#x2F;* 默认跳转 *&#x2F;&#125;</span><br><span class="line">              &#123;&#x2F;* &lt;Redirect to&#x3D;&quot;&#x2F;dashboard&#x2F;product&quot;&gt;&lt;&#x2F;Redirect&gt; *&#x2F;&#125;</span><br><span class="line">          &lt;&#x2F;Sw&gt;</span><br><span class="line"> 使用 link跳转</span><br><span class="line"> 		&lt;Link to&#x3D;&quot;&#x2F;dashboard&#x2F;partner&quot;&gt;合作伙伴&lt;&#x2F;Link&gt;</span><br></pre></td></tr></table></figure>

<p>第二种</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">写事件</span><br><span class="line">switch (params) &#123;</span><br><span class="line">    case &#39;开发向导&#39;:</span><br><span class="line">      &#x2F;&#x2F; this.props.history.push(&#39;&#x2F;article&#39;)</span><br><span class="line">      this.props.history.push(&#39;&#x2F;dashboard&#x2F;guide&#39;)</span><br><span class="line">      console.log(this.props.history)</span><br><span class="line">      break;</span><br><span class="line">    case &#39;产品中心&#39;:</span><br><span class="line">      this.props.history.push(&#39;&#x2F;dashboard&#x2F;product&#39;)</span><br><span class="line">      break;</span><br><span class="line">    case &#39;数据中心&#39;:</span><br><span class="line">      &#x2F;&#x2F; this.props.history.push(&#39;&#x2F;article&#39;)</span><br><span class="line">      break;</span><br><span class="line">    case &#39;合作伙伴&#39;:</span><br><span class="line">      this.props.history.push(&#39;&#x2F;dashboard&#x2F;partner&#39;)</span><br><span class="line">      break;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  export default withRouter(index);</span><br></pre></td></tr></table></figure>

<h2 id="15-6路由传值的区别和使用"><a href="#15-6路由传值的区别和使用" class="headerlink" title="15.6路由传值的区别和使用"></a>15.6路由传值的区别和使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Params</span><br><span class="line">    &lt;Route path&#x3D;&#39;&#x2F;path&#x2F;:name&#39; component&#x3D;&#123;Path&#125;&#x2F;&gt;</span><br><span class="line">    &lt;link to&#x3D;&quot;&#x2F;path&#x2F;2&quot;&gt;xxx&lt;&#x2F;Link&gt;</span><br><span class="line">    this.props.history.push(&#123;pathname:&quot;&#x2F;path&#x2F;&quot; + name&#125;);</span><br><span class="line">    读取参数用:this.props.match.params.name</span><br><span class="line">	&#x2F;&#x2F;缺点</span><br><span class="line">	&#x2F;&#x2F;优势 ： 刷新地址栏，参数依然存在</span><br><span class="line">	&#x2F;&#x2F;缺点:只能传字符串，并且，如果传的值太多的话，url会变得长而丑陋。</span><br><span class="line">query</span><br><span class="line">	&lt;Route path&#x3D;&#39;&#x2F;query&#39; component&#x3D;&#123;Query&#125;&#x2F;&gt;</span><br><span class="line">	&lt;Link to&#x3D;&#123;&#123; path : &#39; &#x2F;query&#39; , query : &#123; name : &#39;sunny&#39; &#125;&#125;&#125;&gt;</span><br><span class="line">	this.props.history.push(&#123;pathname:&quot;&#x2F;query&quot;,query: &#123; name : &#39;sunny&#39; &#125;&#125;);</span><br><span class="line">	读取参数用: this.props.location.query.name</span><br><span class="line">    &#x2F;&#x2F;优势：传参优雅，传递参数可传对象；</span><br><span class="line">	&#x2F;&#x2F;缺点：刷新地址栏，参数丢失</span><br><span class="line">state</span><br><span class="line">    &lt;Route path&#x3D;&#39;&#x2F;sort &#39; component&#x3D;&#123;Sort&#125;&#x2F;&gt;</span><br><span class="line">	&lt;Link to&#x3D;&#123;&#123; path : &#39; &#x2F;sort &#39; , state : &#123; name : &#39;sunny&#39; &#125;&#125;&#125;&gt; </span><br><span class="line">	this.props.history.push(&#123;pathname:&quot;&#x2F;sort &quot;,state : &#123; name : &#39;sunny&#39; &#125;&#125;);</span><br><span class="line">	读取参数用: this.props.location.query.state </span><br><span class="line">    &#x2F;&#x2F;优缺点同query</span><br><span class="line">search</span><br><span class="line">    &lt;Route path&#x3D;&#39;&#x2F;web&#x2F;departManange &#39; component&#x3D;&#123;DepartManange&#125;&#x2F;&gt;</span><br><span class="line">	&lt;link to&#x3D;&quot;web&#x2F;departManange?tenantId&#x3D;12121212&quot;&gt;xxx&lt;&#x2F;Link&gt;</span><br><span class="line">	this.props.history.push(&#123;pathname:&quot;&#x2F;web&#x2F;departManange?tenantId&quot; + row.tenantId&#125;);</span><br><span class="line">	读取参数用: this.props.location.search</span><br><span class="line">    &#x2F;&#x2F;优缺点同params</span><br></pre></td></tr></table></figure>



<h1 id="十六-material-ui的使用"><a href="#十六-material-ui的使用" class="headerlink" title="十六.material-ui的使用"></a>十六.material-ui的使用</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 安装material-ui</span><br><span class="line">npm  install  @material-ui&#x2F;core</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 安装material  icons</span><br><span class="line">npm  install  @material-ui&#x2F;icons</span><br><span class="line"></span><br><span class="line">import Button from &#39;@material-ui&#x2F;core&#x2F;Button&#39;;  &#x2F;&#x2F; 导入Button组件</span><br></pre></td></tr></table></figure>

<h1 id="十七-打包"><a href="#十七-打包" class="headerlink" title="十七.打包"></a>十七.打包</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;wap-v2&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;0.1.0&quot;,</span><br><span class="line">  &quot;private&quot;: true,</span><br><span class="line">  &quot;homepage&quot;: &quot;.&#x2F;&quot;,         &#x2F;&#x2F;加上此句即可</span><br><span class="line">  &quot;dependencies&quot;: &#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">无报错但空白页</span><br><span class="line">HashRouter与BrowserRouter的异同</span><br><span class="line">将BrowserRouter 改为 HashRouter</span><br></pre></td></tr></table></figure>

<h1 id="十八-坑"><a href="#十八-坑" class="headerlink" title="十八.坑"></a>十八.坑</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">书写方案1：this.setstate(&#123;&#125;,()&#x3D;&gt;&#123;&#125;)</span><br><span class="line">书写方案2：this.setstate(()&#x3D;(&#123;&#125;),()&#x3D;&gt;&#123;&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">create()&#123;</span><br><span class="line">   this.setState(&#123;</span><br><span class="line">     controll: !this.state.controll</span><br><span class="line">   &#125;,function()&#123;</span><br><span class="line">     console.log(this.state.controll)</span><br><span class="line">   &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">引入图片</span><br><span class="line">	src:require(&#39;..&#x2F;..&#x2F;..&#x2F;assets&#x2F;images&#x2F;工位占用状态传感器.jpg&#39;)&#125;</span><br></pre></td></tr></table></figure>

<h1 id="十九-ui库"><a href="#十九-ui库" class="headerlink" title="十九.ui库"></a>十九.ui库</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yarn add antd</span><br><span class="line"></span><br><span class="line">在要使用的地方引入</span><br><span class="line">import &#123; Button &#125; from &#39;antd&#39;;</span><br><span class="line"></span><br><span class="line">在app.css中引入</span><br><span class="line">@import &#39;~antd&#x2F;dist&#x2F;antd.css&#39;;</span><br></pre></td></tr></table></figure>

<h1 id="二十-redux"><a href="#二十-redux" class="headerlink" title="二十.redux"></a>二十.redux</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">redux是一个独立专门用于状态管理的js库</span><br><span class="line">它可以用在react angular vue等项目中 但基本与react配合使用</span><br><span class="line">作用 管理react 应用中多个组件共享的状态</span><br><span class="line"></span><br><span class="line">下载redux的包</span><br><span class="line">npm install --save redux</span><br><span class="line"></span><br><span class="line">什么情况下使用 redux</span><br><span class="line"></span><br><span class="line">某个组件的状态需要共享</span><br><span class="line">某个状态在任何地方都可以拿到</span><br><span class="line">一个组件需要改变全局状态</span><br><span class="line">一个组件需要改变另外一个组件的状态</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">不使用 redux</span><br><span class="line">&#x2F;&#x2F;  得到选择的数量</span><br><span class="line">	const number &#x3D; this.select.value * 1</span><br><span class="line">&#x2F;&#x2F; 得到原本的count状态,并且计算新的count</span><br><span class="line">	const count &#x3D; this.state.conut + number</span><br><span class="line">&#x2F;&#x2F; 更新状态</span><br><span class="line">	this.setState(&#123;count:count&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="20-1redux核心api"><a href="#20-1redux核心api" class="headerlink" title="20.1redux核心api"></a>20.1redux核心api</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">createStore()   创建包含指定redux的store对象</span><br><span class="line"></span><br><span class="line">    store对象</span><br><span class="line">            redux库最核心的管理对象</span><br><span class="line">            它内部维护着</span><br><span class="line">                state</span><br><span class="line">                reducer</span><br><span class="line">            核心方法</span><br><span class="line">                getState()</span><br><span class="line">                dispatch(action)</span><br><span class="line">                subscribe(listener)</span><br><span class="line">            编码</span><br><span class="line">                store.getState()</span><br><span class="line">                store.dispatch(&#123;type:&#39;INCREMENT&#125;&#39;,number)</span><br><span class="line">                store.subcribe(render)</span><br><span class="line">applyMiddleware()</span><br><span class="line">	应用于基于redux的中间件</span><br><span class="line">	异步中间件等</span><br><span class="line">combineReducers()</span><br><span class="line">	作用  合并多个reducer函数</span><br></pre></td></tr></table></figure>

<h2 id="20-2redux的核心概念"><a href="#20-2redux的核心概念" class="headerlink" title="20.2redux的核心概念"></a>20.2redux的核心概念</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">action	</span><br><span class="line">		标识要执行行为的对象</span><br><span class="line">		包含2个方面的属性</span><br><span class="line">		type:标识属性，值为字符串，唯一，必要属性</span><br><span class="line">		data也可以是其他:数据属性，值类型任意，可选属性</span><br><span class="line"></span><br><span class="line">reducer</span><br><span class="line">		根据老的state和action 产生新的state的纯函数</span><br><span class="line">		返回一个新的状态</span><br><span class="line"></span><br><span class="line">store</span><br><span class="line">		将state,action和reducer联系在一起的对象 </span><br></pre></td></tr></table></figure>

<h2 id="20-3开始使用"><a href="#20-3开始使用" class="headerlink" title="20.3开始使用"></a>20.3开始使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">1.&#x2F;&#x2F; 引入redux</span><br><span class="line">import &#123;createStore&#125; from &#39;redux&#39;</span><br><span class="line"></span><br><span class="line">2.&#x2F;&#x2F;生成一个store对象</span><br><span class="line">&#x2F;&#x2F;引入reducer</span><br><span class="line">&#x2F;&#x2F;内部会第一次调用reducer函数，得到初始state</span><br><span class="line">import &#123;counter&#125; from &#39;.&#x2F;redux&#x2F;reducers&#39;</span><br><span class="line">const store &#x3D; createStore(counter)</span><br><span class="line"></span><br><span class="line">3.&#x2F;&#x2F;将action type 的常量字符串定义在</span><br><span class="line">export const INCREMENT &#x3D; &#39;INCREMENT&#39;</span><br><span class="line">export const DECREMENT &#x3D; &#39;DECREMENT&#39;</span><br><span class="line"></span><br><span class="line">4.&#x2F;&#x2F;书写reducer</span><br><span class="line">&#x2F;&#x2F; 包含多个reducer函数</span><br><span class="line">&#x2F;&#x2F;引入 action type</span><br><span class="line">import &#123;INCREMENT,DECREMENT&#125; from &#39;.&#x2F;action-type&#39;</span><br><span class="line">export function counter(state &#x3D; 0, action) &#123;</span><br><span class="line">  &#x2F;&#x2F;形参默认值</span><br><span class="line">  console.log(&quot;counter():&quot;, state, action);</span><br><span class="line">  switch (action.type) &#123;</span><br><span class="line">    case INCREMENT:</span><br><span class="line">      return state + action.data;</span><br><span class="line">    case DECREMENT:</span><br><span class="line">      return state - action.data;</span><br><span class="line">    default:</span><br><span class="line">      return state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">5.将store传给  APP组件</span><br><span class="line">  &lt;APP store&#x3D;&#123;store&#125;&gt;&lt;&#x2F;APP&gt;</span><br><span class="line">  再组件内部</span><br><span class="line">  状态可以用 </span><br><span class="line">  const count  &#x3D; this.props.store.getState()  &#x2F;&#x2F;获取旧的count</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F;更新状态</span><br><span class="line">  import &#123;INCREMENT,DECREMENT&#125; from &#39;..&#x2F;..&#x2F;action-type&#39;</span><br><span class="line">  this.props.store.dispatch(&#123;</span><br><span class="line">      type:INCREMENT,</span><br><span class="line">      data: number</span><br><span class="line">  &#125;)</span><br><span class="line"> 6.&#x2F;&#x2F;订阅监听,store状态变化了 就进行重绘</span><br><span class="line">    store.subscribe(</span><br><span class="line">      function()&#123;</span><br><span class="line">        ReactDOM.render(</span><br><span class="line">          &lt;React.StrictMode&gt;</span><br><span class="line">            &lt;App &#x2F;&gt;</span><br><span class="line">          &lt;&#x2F;React.StrictMode&gt;,</span><br><span class="line">          document.getElementById(&#39;root&#39;)</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  7.抽离封装 action creator</span><br><span class="line">  &#x2F;&#x2F;增加</span><br><span class="line">    export const incrementCreate &#x3D; (number) &#x3D;&gt;&#123;</span><br><span class="line">        return (&#123;</span><br><span class="line">            type: INCREMENT,</span><br><span class="line">            data: number</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;减少</span><br><span class="line">    export const decreamentCreate &#x3D; (number) &#x3D;&gt;&#123;</span><br><span class="line">        return (&#123;</span><br><span class="line">            type: INCREMENT,</span><br><span class="line">            data: number</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    8.抽离store对象</span><br><span class="line">    import &#123;createStore&#125; from &#39;redux&#39;</span><br><span class="line">        &#x2F;&#x2F;引入reducer</span><br><span class="line">        import &#123;counter&#125; from &#39;.&#x2F;redux&#x2F;reducers&#39;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;生成一个store对象</span><br><span class="line">        const store &#x3D; createStore(counter)</span><br><span class="line">        export default store</span><br></pre></td></tr></table></figure>

<h1 id="二十一-Antd-加-react"><a href="#二十一-Antd-加-react" class="headerlink" title="二十一.Antd 加 react"></a>二十一.Antd 加 react</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dva  dmi   脚手架 自动安装 react + </span><br></pre></td></tr></table></figure>

<h2 id="21-1开启装饰器"><a href="#21-1开启装饰器" class="headerlink" title="21.1开启装饰器"></a>21.1开启装饰器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">当我们需要在多个不同的类之间共享或者扩展一些方法或行为的时候，代码会变得错综复杂，极其不优雅，这也就是装饰器被提出的一个很重要的原因。</span><br><span class="line"></span><br><span class="line">@decorator</span><br><span class="line">class Cat &#123;&#125;</span><br><span class="line"></span><br><span class="line">class Dog &#123;</span><br><span class="line">    @decorator</span><br><span class="line">    run() &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">我们在定义装饰器的时候，参数是有三个，target、name、descriptor 。</span><br><span class="line">其实装饰器在作用于属性的时候，实际上是通过 Object.defineProperty 来进行扩展和封装的。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">安装 </span><br><span class="line">	react-app-rewired  customize-cra</span><br><span class="line">	yarn add react-app-rewired  customize-cra</span><br><span class="line">	</span><br><span class="line">修改package.json</span><br><span class="line">	&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;react-app-rewired start&quot;,</span><br><span class="line">    &quot;build&quot;: &quot;react-app-rewired build&quot;,</span><br><span class="line">    &quot;test&quot;: &quot;react-app-rewired test&quot;,</span><br><span class="line">    &quot;eject&quot;: &quot;react-app-rewired eject&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  增加 config-overrides.js</span><br><span class="line">  const &#123;</span><br><span class="line">  override,</span><br><span class="line">  addDecoratorsLegacy</span><br><span class="line">    &#125; &#x3D; require(&quot;customize-cra&quot;);</span><br><span class="line">    module.exports &#x3D; override(</span><br><span class="line">      &#x2F;&#x2F; enable legacy decorators babel plugin</span><br><span class="line">      addDecoratorsLegacy()</span><br><span class="line">    );</span><br></pre></td></tr></table></figure>

<h2 id="21-2安装antd"><a href="#21-2安装antd" class="headerlink" title="21.2安装antd"></a>21.2安装antd</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">yarn add antd</span><br><span class="line">antd 里面的组件库都是less预编译语言开发的  默认有一整套完整的主题</span><br><span class="line"></span><br><span class="line">例如  primary 关键字  颜色是 蓝色  danger是红色 </span><br><span class="line">	那我们如何修改这种样式</span><br><span class="line">	</span><br><span class="line">修改装饰器和 全局主题   默认主题样式</span><br><span class="line">安装  yarn add babel-plugin-import</span><br><span class="line">+ module.exports &#x3D; override(</span><br><span class="line">+   fixBabelImports(&#39;import&#39;, &#123;</span><br><span class="line">+     libraryName: &#39;antd&#39;,</span><br><span class="line">+     libraryDirectory: &#39;es&#39;,</span><br><span class="line">+     style: &#39;css&#39;,</span><br><span class="line">+   &#125;),</span><br><span class="line">+ );</span><br><span class="line"></span><br><span class="line">安装  yarn add less less-loader</span><br><span class="line"></span><br><span class="line">	去除默认的  严格模式</span><br><span class="line">	</span><br><span class="line">踩坑  对于eject报错的问题</span><br><span class="line">	git add .</span><br><span class="line">	git commit -m &#39;init&#39;</span><br><span class="line">	npm run eject</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">465行  sass-loader改为 less-loader</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; style files regexes</span><br><span class="line">const cssRegex &#x3D; &#x2F;\.css$&#x2F;;</span><br><span class="line">const cssModuleRegex &#x3D; &#x2F;\.module\.css$&#x2F;;</span><br><span class="line">const sassRegex &#x3D; &#x2F;\.(scss|less)$&#x2F;;</span><br><span class="line">const sassModuleRegex &#x3D; &#x2F;\.module\.(scss|less)$&#x2F;;</span><br><span class="line"></span><br><span class="line">遇到问题无法yarn start</span><br><span class="line">之后  yarn add react-scripts   </span><br><span class="line"></span><br><span class="line">重新操作</span><br></pre></td></tr></table></figure>

<h2 id="21-3安装react生态"><a href="#21-3安装react生态" class="headerlink" title="21.3安装react生态"></a>21.3安装react生态</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-router-dom</span><br><span class="line">yarn add axios redux react-redux redux</span><br></pre></td></tr></table></figure>

<h2 id="21-4默认英文转化"><a href="#21-4默认英文转化" class="headerlink" title="21.4默认英文转化"></a>21.4默认英文转化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import zhCN from &#39;antd&#x2F;es&#x2F;locale&#x2F;zh_CN&#39;;</span><br><span class="line">import &#123; ConfigProvider &#125; from &#39;antd&#39;;</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;ConfigProvider locale&#x3D;&#123;zhCN&#125;&gt;</span><br><span class="line">  &lt;App &#x2F;&gt;</span><br><span class="line">&lt;&#x2F;ConfigProvider&gt;,</span><br></pre></td></tr></table></figure>

<h2 id="21-5路由规划和懒加载"><a href="#21-5路由规划和懒加载" class="headerlink" title="21.5路由规划和懒加载"></a>21.5路由规划和懒加载</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">公共路由</span><br><span class="line">私有路由</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">权限控制 RBAC  基于角色权限管理</span><br><span class="line">图标美化</span><br><span class="line">	npm install --save @ant-design&#x2F;icons</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	懒加载</span><br><span class="line">		yarn add react-loadable</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">import Loadable from &#39;react-loadable&#39;;</span><br><span class="line">import Loading from &#39;..&#x2F;components&#x2F;loading&#39;;</span><br><span class="line"> </span><br><span class="line">const Article &#x3D; Loadable(&#123;</span><br><span class="line">  loader: () &#x3D;&gt; import(&#39;..&#x2F;views&#x2F;Article&#x2F;index&#39;),</span><br><span class="line">  loading: Loading,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">	 render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;Loading...&lt;&#x2F;div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="21-6axios"><a href="#21-6axios" class="headerlink" title="21.6axios"></a>21.6axios</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.timeout &#x3D; 50000 &#x2F;&#x2F;设置接口响应时间</span><br><span class="line">axios.defaults.baseURL &#x3D; &#39;http:&#x2F;&#x2F;rap2.taobao.org:38080&#x2F;app&#x2F;mock&#x2F;256761&#x2F;api&#x2F;v1&#39; &#x2F;&#x2F; 这是调用数据接口,公共接口url+调用接口名</span><br><span class="line">axios.defaults.withCredentials&#x3D; true;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;拦截器</span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">    &#x2F;&#x2F;config包含每次请求的信息</span><br><span class="line">    config &#x3D;&gt; &#123;</span><br><span class="line">        &#x2F;&#x2F;拿请求路径</span><br><span class="line">        &#x2F;&#x2F;console.log(&#39;请求路径&#39;, config.url)</span><br><span class="line">        &#x2F;&#x2F;去缓存中拿token</span><br><span class="line">        &#x2F;&#x2F; let token &#x3D; store.state.token;  &#x2F;&#x2F;从缓存中取token</span><br><span class="line">        &#x2F;&#x2F;有token</span><br><span class="line">        &#x2F;&#x2F; if (token) &#123;</span><br><span class="line">        &#x2F;&#x2F;     &#x2F;&#x2F; config.headers.Authorization &#x3D; token;    &#x2F;&#x2F;将token放到请求头发送给服务器</span><br><span class="line">        &#x2F;&#x2F; &#125; else &#123;</span><br><span class="line">        &#x2F;&#x2F;     &#x2F;&#x2F;localStorage.clear();  &#x2F;&#x2F;清空缓存</span><br><span class="line">        &#x2F;&#x2F;     &#x2F;&#x2F;排除login请求接口</span><br><span class="line">        &#x2F;&#x2F;     if (router.currentRoute.name &amp;&amp; router.currentRoute.name.toLowerCase() &#x3D;&#x3D; &quot;login&quot;) &#123;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;     &#125; else &#123;</span><br><span class="line">        &#x2F;&#x2F;         &#x2F;&#x2F;否则 全部返回null</span><br><span class="line">        &#x2F;&#x2F;     &#125;</span><br><span class="line">        &#x2F;&#x2F; &#125;</span><br><span class="line">        return config</span><br><span class="line">    &#125;,</span><br><span class="line">    err &#x3D;&gt; &#123;</span><br><span class="line">        return Promise.reject(err)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line">&#x2F;&#x2F; http response 拦截器</span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">    response &#x3D;&gt; &#123;</span><br><span class="line">        return response; &#x2F;&#x2F;请求成功的时候返回的data</span><br><span class="line">    &#125;,</span><br><span class="line">    error &#x3D;&gt; &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            &#x2F;&#x2F; if (error.response) &#123;</span><br><span class="line">            &#x2F;&#x2F;     switch (error.response.status) &#123;</span><br><span class="line">            &#x2F;&#x2F;         case 401: &#x2F;&#x2F;token过期，清除token并跳转到登录页面</span><br><span class="line">            &#x2F;&#x2F;             &#x2F;&#x2F;localStorage.clear();</span><br><span class="line">            &#x2F;&#x2F;             var baurl &#x3D; window.location.href;</span><br><span class="line">            &#x2F;&#x2F;             console.log(baurl)</span><br><span class="line">            &#x2F;&#x2F;             router.replace(&#123;</span><br><span class="line">            &#x2F;&#x2F;                 path: &#39;login&#39;,</span><br><span class="line">            &#x2F;&#x2F;                 query: &#123; backUrl: baurl &#125;</span><br><span class="line">            &#x2F;&#x2F;             &#125;);</span><br><span class="line">            &#x2F;&#x2F;             return;</span><br><span class="line">            &#x2F;&#x2F;     &#125;</span><br><span class="line">            &#x2F;&#x2F; &#125;</span><br><span class="line">            return Promise.reject(error.response.data)</span><br><span class="line">        &#125;</span><br><span class="line">        catch (e) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#x2F; 封装axios的get请求</span><br><span class="line">export function getData(url, params) &#123;</span><br><span class="line">    return new Promise((resolve, reject) &#x3D;&gt; &#123;</span><br><span class="line">      axios.get(url, &#123;params:params&#125;).then(response &#x3D;&gt; &#123;</span><br><span class="line">          resolve(response.data);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(error &#x3D;&gt; &#123;</span><br><span class="line">          reject(error);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  &#x2F;&#x2F; 封装axios的post请求</span><br><span class="line">  export function postData(url, params) &#123;</span><br><span class="line">    return new Promise((resolve, reject) &#x3D;&gt; &#123;</span><br><span class="line">      axios.post(url, QS.stringify(params)).then(response &#x3D;&gt; &#123;</span><br><span class="line">          console.log(response)</span><br><span class="line">          resolve(response.data);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(error &#x3D;&gt; &#123;</span><br><span class="line">          reject(error);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  export function Postdownload(url, params,responsetype) &#123;</span><br><span class="line">    return new Promise((resolve, reject) &#x3D;&gt; &#123;</span><br><span class="line">      &#x2F;&#x2F;&#123;responseType:&#39;blob&#39;&#125;</span><br><span class="line">      axios.post(url, QS.stringify(params)).then(response &#x3D;&gt; &#123;</span><br><span class="line">          resolve(response);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(error &#x3D;&gt; &#123;</span><br><span class="line">          reject(error);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">export default axios</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;在  api.js中使用</span><br><span class="line">import &#123;getData,postData,Postdownload&#125; from &#39;..&#x2F;utils&#x2F;http&#39;</span><br><span class="line">export function GetArticle(data&#x3D;&#123;&#125;)&#123;</span><br><span class="line">    return getData(&#39;&#x2F;article&#39;,data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.构造函数axios</span><br><span class="line">const isDev  &#x3D; process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &#39;development&#39;</span><br><span class="line">	const service &#x3D; axios.create(&#123;</span><br><span class="line">        baseURl: isDev? &#39;测试地址&#39;:&#39;线上地址&#39;</span><br><span class="line">	&#125;)</span><br><span class="line">	</span><br><span class="line">	const getTopics &#x3D; ()&#x3D;&gt;&#123;</span><br><span class="line">        return service.get(‘&#x2F;article’)</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h2 id="21-7-对象返回标签内容"><a href="#21-7-对象返回标签内容" class="headerlink" title="21.7.对象返回标签内容"></a>21.7.对象返回标签内容</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">return &#123;</span><br><span class="line">           title: mapTableTitle[item],</span><br><span class="line">           dataIndex: item,</span><br><span class="line">           key: item,</span><br><span class="line">           render:(text,record,index)&#x3D;&gt;&#123;</span><br><span class="line">              return (</span><br><span class="line">               &lt;Tooltip title&#x3D;&#123;record.amount &gt;&#x3D;100? &#39;阅读数超过1000&#39;:&#39;阅读数低于1000&#39;&#125;&gt;</span><br><span class="line">               &lt;Tag color&#x3D;&#123;record.amount &gt;&#x3D;100? &#39;red&#39;:&#39;green&#39;&#125;&gt;&#123;record.amount&#125;&lt;&#x2F;Tag&gt;</span><br><span class="line">               &lt;&#x2F;Tooltip&gt;</span><br><span class="line">              )</span><br><span class="line">           &#125;</span><br><span class="line">         &#125;</span><br></pre></td></tr></table></figure>

<h2 id="21-8-标题随着内容变化"><a href="#21-8-标题随着内容变化" class="headerlink" title="21.8.标题随着内容变化"></a>21.8.标题随着内容变化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">在 APP.js里面的构造函数</span><br><span class="line">this.props.history.listen((location)&#x3D;&gt;&#123;</span><br><span class="line">        var pathname &#x3D; location.pathname;</span><br><span class="line">        var one &#x3D; privateRoutes.find(item &#x3D;&gt;&#123;</span><br><span class="line">          return item.pathname &#x3D;&#x3D; pathname;</span><br><span class="line">        &#125;)</span><br><span class="line">        document.title &#x3D; one &amp;&amp; one.title;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h1 id="二十二-Redux"><a href="#二十二-Redux" class="headerlink" title="二十二.Redux"></a>二十二.Redux</h1><h2 id="22-1Redux的工作流程"><a href="#22-1Redux的工作流程" class="headerlink" title="22.1Redux的工作流程"></a>22.1Redux的工作流程</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">首先 是 React组件向 action发送请求</span><br><span class="line">然后 到 store</span><br><span class="line">然后到  reducer</span><br><span class="line">然后返回 store</span><br><span class="line">然后返回给组件</span><br></pre></td></tr></table></figure>

<h2 id="22-2redux-dev"><a href="#22-2redux-dev" class="headerlink" title="22.2redux dev"></a>22.2redux dev</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;增加调试</span><br><span class="line"> window.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__()</span><br></pre></td></tr></table></figure>

<h2 id="22-3流程"><a href="#22-3流程" class="headerlink" title="22.3流程"></a>22.3流程</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">1.创建仓库</span><br><span class="line"></span><br><span class="line">	import &#123; createStore &#125; from &#39;redux&#39;</span><br><span class="line">	&#x2F;&#x2F;引入reducer</span><br><span class="line">    import reducer from &#39;.&#x2F;reducer&#39;</span><br><span class="line">    &#x2F;&#x2F;创建了一个仓库</span><br><span class="line">    &#x2F;&#x2F;然后注入reducer</span><br><span class="line">	const store &#x3D; createStore(</span><br><span class="line">    reducer,</span><br><span class="line">    window.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__()</span><br><span class="line">    )</span><br><span class="line">	export default store</span><br><span class="line"></span><br><span class="line">2.组件构造函数里面引入state</span><br><span class="line"></span><br><span class="line">	this.state &#x3D; store.getState();</span><br><span class="line"></span><br><span class="line">3.actiontypes</span><br><span class="line">	</span><br><span class="line">    export const CHANGE_INPUT &#x3D; &#39;changeInput&#39;</span><br><span class="line">    export const ADD_ITEM &#x3D; &#39;additem&#39;</span><br><span class="line">    export const DEL &#x3D; &#39;delitem&#39;</span><br><span class="line"></span><br><span class="line">4.actioncreators</span><br><span class="line">	</span><br><span class="line">	import &#123; CHANGE_INPUT,ADD_ITEM,DEL&#125; from &#39;.&#x2F;actiontypes&#39;</span><br><span class="line">    export const changeInputAction &#x3D; (value) &#x3D;&gt; (&#123;</span><br><span class="line">        type: CHANGE_INPUT,</span><br><span class="line">        value</span><br><span class="line">    &#125;)</span><br><span class="line">    export const addAction &#x3D; () &#x3D;&gt; (&#123;</span><br><span class="line">        type: ADD_ITEM</span><br><span class="line">    &#125;)</span><br><span class="line">    export const delAction &#x3D; (index) &#x3D;&gt; (&#123;</span><br><span class="line">        type: DEL,</span><br><span class="line">        index</span><br><span class="line">    &#125;)</span><br><span class="line">5.订阅实时更新</span><br><span class="line"></span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props);</span><br><span class="line">        this.state &#x3D; store.getState();</span><br><span class="line">        &#x2F;&#x2F;该白this指向</span><br><span class="line">        &#x2F;&#x2F; this.changeInputValue &#x3D; this.changeInputValue.bind(this)</span><br><span class="line">        &#x2F;&#x2F;store 订阅</span><br><span class="line">        store.subscribe(this.storeChange);</span><br><span class="line">      &#125;</span><br><span class="line">      &#x2F;&#x2F;订阅</span><br><span class="line">      storeChange &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">        this.setState(store.getState);</span><br><span class="line">      &#125;;</span><br><span class="line">6. 主函数改变操作</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;改变store的值</span><br><span class="line">      changeInputValue &#x3D; (e) &#x3D;&gt; &#123;</span><br><span class="line">        const action &#x3D; changeInputAction(e.target.value)</span><br><span class="line">        store.dispatch(action);</span><br><span class="line">      &#125;;</span><br><span class="line">      &#x2F;&#x2F;增加</span><br><span class="line">      ClickBtn &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">        const action &#x3D; addAction()</span><br><span class="line">        store.dispatch(action);</span><br><span class="line">      &#125;;</span><br><span class="line">      &#x2F;&#x2F;删除</span><br><span class="line">      DelItem &#x3D; (index) &#x3D;&gt; &#123;</span><br><span class="line">        const action &#x3D; delAction(index)</span><br><span class="line">        store.dispatch(action);</span><br><span class="line">      &#125;;</span><br></pre></td></tr></table></figure>

<h2 id="22-4注意事项"><a href="#22-4注意事项" class="headerlink" title="22.4注意事项"></a>22.4注意事项</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.store必须是唯一的</span><br><span class="line"></span><br><span class="line">2.reducer不能直接改变store里面的state  只能接收</span><br><span class="line"></span><br><span class="line">3.Reducer只能是纯函数</span><br></pre></td></tr></table></figure>

<h2 id="22-5组件UI和逻辑部分的拆分"><a href="#22-5组件UI和逻辑部分的拆分" class="headerlink" title="22.5组件UI和逻辑部分的拆分"></a>22.5组件UI和逻辑部分的拆分</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">定义TodolistUI</span><br><span class="line"></span><br><span class="line">	 &lt;ToDoListUI </span><br><span class="line">      inputValue &#x3D; &#123;this.state.inputValue&#125;</span><br><span class="line">      changeInputValue&#x3D;&#123;this.changeInputValue&#125;</span><br><span class="line">      ClickBtn &#x3D; &#123;this.ClickBtn&#125;</span><br><span class="line">      list &#x3D; &#123;this.state.list&#125;</span><br><span class="line">      DelItem &#x3D; &#123;this.DelItem&#125;</span><br><span class="line">      &#x2F;&gt;在··</span><br><span class="line">      </span><br><span class="line">      UI组件接受使用props</span><br><span class="line">      onChange&#x3D;&#123;(e) &#x3D;&gt; this.props.changeInputValue(e)&#125;</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<h2 id="22-6无状态组件"><a href="#22-6无状态组件" class="headerlink" title="22.6无状态组件"></a>22.6无状态组件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">没有class constructor</span><br><span class="line">函数的返回值为  UI组件</span><br><span class="line"></span><br><span class="line">无状态组件就是一个标准的函数</span><br></pre></td></tr></table></figure>

<h2 id="22-7axios和redux的结合"><a href="#22-7axios和redux的结合" class="headerlink" title="22.7axios和redux的结合"></a>22.7axios和redux的结合</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">export const GetList &#x3D; &#39;getlist&#39;</span><br><span class="line">export const getListAction &#x3D; (data) &#x3D;&gt; (&#123;</span><br><span class="line">    type: GetList,</span><br><span class="line">    data</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">if(action.type &#x3D;&#x3D;&#x3D; GetList)&#123;</span><br><span class="line">        let newState &#x3D; JSON.parse(JSON.stringify(state))</span><br><span class="line">        newState.list &#x3D; action.data.result</span><br><span class="line">        console.log(action.data.result)</span><br><span class="line">        return newState</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"> componentDidMount()&#123;</span><br><span class="line">    GetList().then((res)&#x3D;&gt;&#123;</span><br><span class="line">        const data &#x3D; res</span><br><span class="line">        const action &#x3D; getListAction(data)</span><br><span class="line">        store.dispatch(action)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h2 id="22-8中间件Redux-thunk"><a href="#22-8中间件Redux-thunk" class="headerlink" title="22.8中间件Redux-thunk"></a>22.8中间件Redux-thunk</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">安装redux-thunk</span><br><span class="line">npm install --save redux-thunk</span><br><span class="line"></span><br><span class="line">配置以及兼容行</span><br><span class="line">	import &#123; createStore,applyMiddleware,compose &#125; from &#39;redux&#39;</span><br><span class="line">    &#x2F;&#x2F;引入reducer</span><br><span class="line">    import reducer from &#39;.&#x2F;reducer&#39;</span><br><span class="line">    &#x2F;&#x2F;配置中间件</span><br><span class="line">    import thunk from &#39;redux-thunk&#39;</span><br><span class="line">    &#x2F;&#x2F;创建了一个仓库</span><br><span class="line">    &#x2F;&#x2F;然后注入reducer</span><br><span class="line">    &#x2F;&#x2F;解决兼容问题</span><br><span class="line">    const composeEnhances &#x3D; window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?</span><br><span class="line">        window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(&#123;&#125;):compose</span><br><span class="line">    const enhancer &#x3D; composeEnhances(applyMiddleware(thunk))</span><br><span class="line">    const store &#x3D; createStore(</span><br><span class="line">        reducer,</span><br><span class="line">        enhancer</span><br><span class="line">        &#x2F;&#x2F; applyMiddleware(thunk),</span><br><span class="line">        &#x2F;&#x2F; window.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__()</span><br><span class="line">        )</span><br><span class="line">    export default store</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F;使用  作用是延长生命周期 放到全局 而不是局部变量里面</span><br><span class="line">    export const ToDoListAction &#x3D; () &#x3D;&gt;&#123;</span><br><span class="line">        return (dispatch) &#x3D;&gt; &#123;</span><br><span class="line">            GetToDoList().then((res)&#x3D;&gt;&#123;</span><br><span class="line">                const data &#x3D; res</span><br><span class="line">                const action &#x3D; getListAction(res)</span><br><span class="line">                dispatch(action)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    componentDidMount()&#123;</span><br><span class="line">        const action &#x3D; ToDoListAction()</span><br><span class="line">        store.dispatch(action)</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<h2 id="22-9中间件Redux-saga"><a href="#22-9中间件Redux-saga" class="headerlink" title="22.9中间件Redux-saga"></a>22.9中间件Redux-saga</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">安装</span><br><span class="line">	yarn add saga</span><br><span class="line"> <span class="keyword">import</span> createSagaMiddleware <span class="keyword">from</span> <span class="string">&#x27;redux-saga&#x27;</span></span><br><span class="line"><span class="keyword">const</span> sagaMiddleWare = createSagaMiddleware();</span><br></pre></td></tr></table></figure>

<h2 id="22-10React-Redux"><a href="#22-10React-Redux" class="headerlink" title="22.10React-Redux"></a>22.10React-Redux</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Provider 提供器 和  connect  连接器</span><br><span class="line"></span><br><span class="line"> &lt;Provider store&#x3D;&#123;store&#125;&gt;</span><br><span class="line">                  &lt;App &#123;...rootprops&#125; &#x2F;&gt;</span><br><span class="line">   &lt;&#x2F;Provider&gt;</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   &#x2F;&#x2F;映射关系</span><br><span class="line"> const stateprops &#x3D; (state) &#x3D;&gt;&#123;</span><br><span class="line">     return &#123;</span><br><span class="line">         inputValue:state.inputValue</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> 	&#x2F;&#x2F;派发</span><br><span class="line">const mapDispatchToProps &#x3D; (dispatch) &#x3D;&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        changeInputValue: (e) &#x3D;&gt; &#123;</span><br><span class="line">            let action &#x3D; &#123;</span><br><span class="line">                type:&#39;change_input&#39;,</span><br><span class="line">                value:e.target.value</span><br><span class="line">            &#125;</span><br><span class="line">            dispatch(action)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default connect(stateprops,mapDispatchToProps)(Setting)</span><br></pre></td></tr></table></figure>

<h1 id="二十三-React-hooks"><a href="#二十三-React-hooks" class="headerlink" title="二十三.React_hooks"></a>二十三.React_hooks</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">原本写法</span><br><span class="line">	this.setState(&#123;</span><br><span class="line">            count:this.state.count+1</span><br><span class="line">        &#125;)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">hooks实现</span><br><span class="line"> import React, &#123; useState &#125; from &quot;react&quot;;</span><br><span class="line"> function Example() &#123;</span><br><span class="line">  const [count, setCount] &#x3D; useState(0);</span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div&gt;You Click &#123;count&#125; times&lt;&#x2F;div&gt;</span><br><span class="line">      &lt;button onClick&#x3D;&#123;()&#x3D;&gt;&#123;setCount(count+1)&#125;&#125;&gt;增加&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="23-1UseState"><a href="#23-1UseState" class="headerlink" title="23.1UseState"></a>23.1UseState</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const [count, setCount] &#x3D; useState(0);</span><br><span class="line">useState方法内部接受的是 初始值</span><br><span class="line">&#x2F;&#x2F;不用解构赋值</span><br><span class="line">	let _userState &#x3D; useState(0)</span><br><span class="line">	let count &#x3D; _userState[0]</span><br><span class="line">	let setState &#x3D; _userState[1]</span><br><span class="line">	</span><br><span class="line">**userState不能存在于条件判断语句中</span><br></pre></td></tr></table></figure>

<h2 id="23-2UseEffect"><a href="#23-2UseEffect" class="headerlink" title="23.2UseEffect"></a>23.2UseEffect</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">和主流逻辑关系不大，起到监听数据修改Dom的时候</span><br><span class="line">	&#x2F;&#x2F;异步的不会影响异步更新</span><br><span class="line"> const [count, setCount] &#x3D; useState(0);</span><br><span class="line">  useEffect(()&#x3D;&gt;&#123;</span><br><span class="line">    console.log(&#96;你点击了$&#123;count&#125;次&#96;)</span><br><span class="line">  &#125;)</span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div&gt;You Click &#123;count&#125; times&lt;&#x2F;div&gt;</span><br><span class="line">      &lt;button onClick&#x3D;&#123;()&#x3D;&gt;&#123;setCount(count+1)&#125;&#125;&gt;增加&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  );</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F;相当于生命周期函数componentDidMount 和 componentDidUpdate</span><br><span class="line">  </span><br><span class="line">   </span><br><span class="line">  useEffect实现生命周期ComponentWillUnmount  解绑 应用于退出 解绑定时器</span><br><span class="line">  	useEffect(()&#x3D;&gt;&#123;</span><br><span class="line">        console.log(&#96;你点击了$&#123;count&#125;次&#96;)</span><br><span class="line">        return ()&#x3D;&gt;&#123;</span><br><span class="line">          console.log(&#39;你走了Example&#39;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,[count])</span><br></pre></td></tr></table></figure>

<h2 id="23-3useContext"><a href="#23-3useContext" class="headerlink" title="23.3useContext"></a>23.3useContext</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; useState, createContext, useContext &#125; from &quot;react&quot;;</span><br><span class="line">&#x2F;&#x2F;创建一个共享的组件</span><br><span class="line">const CountContext &#x3D; createContext();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;父组件内部</span><br><span class="line">&lt;CountContext.Provider value&#x3D;&#123;count&#125;&gt;</span><br><span class="line">		&#x2F;&#x2F;字组件</span><br><span class="line">        &lt;Counter&gt;&lt;&#x2F;Counter&gt;</span><br><span class="line">  &lt;&#x2F;CountContext.Provider&gt;</span><br><span class="line">  </span><br><span class="line"> &#x2F;&#x2F;子组件</span><br><span class="line"> &#x2F;&#x2F;字组件</span><br><span class="line">function  Counter()&#123;</span><br><span class="line">    let count &#x3D; useContext(CountContext)</span><br><span class="line">    return(</span><br><span class="line">        &lt;h2&gt;&#123;count&#125;&lt;&#x2F;h2&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="23-4userReducer"><a href="#23-4userReducer" class="headerlink" title="23.4userReducer"></a>23.4userReducer</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;基本语法</span><br><span class="line"> 原生reducer</span><br><span class="line"> 	&#x2F;&#x2F;原生reducer</span><br><span class="line">    &#x2F;&#x2F; function countReducer(state,action)&#123;</span><br><span class="line">    &#x2F;&#x2F;     switch(action.type)&#123;</span><br><span class="line">    &#x2F;&#x2F;         case &#39;add&#39;:</span><br><span class="line">    &#x2F;&#x2F;             return state + 1</span><br><span class="line">    &#x2F;&#x2F;         case &#39;sub&#39;:</span><br><span class="line">    &#x2F;&#x2F;             return state - 1</span><br><span class="line">    &#x2F;&#x2F;         default:</span><br><span class="line">    &#x2F;&#x2F;             return state</span><br><span class="line">    &#x2F;&#x2F;     &#125;</span><br><span class="line">    &#x2F;&#x2F; &#125;</span><br><span class="line">   如何使用</span><br><span class="line">   import React, &#123; useReducer &#125; from &quot;react&quot;;</span><br><span class="line">    function ReducerDemo() &#123;</span><br><span class="line">      const [count, dispatch] &#x3D; useReducer((state, action) &#x3D;&gt; &#123;</span><br><span class="line">        switch (action) &#123;</span><br><span class="line">          case &quot;add&quot;:</span><br><span class="line">            return state + 1;</span><br><span class="line">          case &quot;sub&quot;:</span><br><span class="line">            return state - 1;</span><br><span class="line">          default:</span><br><span class="line">            return state;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, 0);</span><br><span class="line">      return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;div&gt;You Click &#123;count&#125; times&lt;&#x2F;div&gt;</span><br><span class="line">          &lt;button onClick&#x3D;&#123;()&#x3D;&gt;&#123;dispatch(&#39;add&#39;)&#125;&#125;&gt;增加&lt;&#x2F;button&gt;</span><br><span class="line">          &lt;button onClick&#x3D;&#123;()&#x3D;&gt;&#123;dispatch(&#39;sub&#39;)&#125;&#125;&gt;减少&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    export default ReducerDemo</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    UseReducer 和 UserContext 实现redux的效果</span><br><span class="line">    color.js</span><br><span class="line">    	import React, &#123; createContext,useReducer &#125; from &#39;react&#39;</span><br><span class="line">        export const ColorContent &#x3D; createContext(&#123;&#125;)</span><br><span class="line">        &#x2F;&#x2F;reducer</span><br><span class="line">        export const reducer &#x3D; (state, action) &#x3D;&gt; &#123;</span><br><span class="line">            switch (action.type) &#123;</span><br><span class="line">                case &#39;updatecolor&#39;:</span><br><span class="line">                    return action.color</span><br><span class="line">                default:</span><br><span class="line">                    return state</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        export const Color &#x3D; props &#x3D;&gt;&#123;</span><br><span class="line">            const [color,dispatch] &#x3D; useReducer(reducer,&#39;blue&#39;)</span><br><span class="line">            return (</span><br><span class="line">                &lt;ColorContent.Provider value&#x3D;&#123;&#123;color,dispatch&#125;&#125;&gt;</span><br><span class="line">                    &#123;props.children&#125;</span><br><span class="line">                &lt;&#x2F;ColorContent.Provider&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">      Button.js</span><br><span class="line">      	function Buttons()&#123;</span><br><span class="line">            const &#123;dispatch&#125; &#x3D; useContext(ColorContent)</span><br><span class="line">            return(</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;button onClick&#x3D;&#123;()&#x3D;&gt;&#123;dispatch(&#123;type:&#39;updatecolor&#39;,color:&quot;red&quot;&#125;)&#125;&#125;&gt;红色&lt;&#x2F;button&gt;</span><br><span class="line">                    &lt;button onClick&#x3D;&#123;()&#x3D;&gt;&#123;dispatch(&#123;type:&#39;updatecolor&#39;,color:&quot;yellow&quot;&#125;)&#125;&#125;&gt;黄色&lt;&#x2F;button&gt;</span><br><span class="line">                &lt;&#x2F;div&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">       ShowArea.js</span><br><span class="line">        const &#123;color&#125; &#x3D; useContext(ColorContent)</span><br><span class="line">        return(</span><br><span class="line">            &lt;div style&#x3D;&#123;&#123; color: color&#125;&#125;&gt;字体颜色为blue&lt;&#x2F;div&gt;</span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line">        Example6.js</span><br><span class="line">         return(</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;Color&gt;</span><br><span class="line">                    &lt;ShowArea&gt;&lt;&#x2F;ShowArea&gt;</span><br><span class="line">                    &lt;Buttons&gt;&lt;&#x2F;Buttons&gt;</span><br><span class="line">                &lt;&#x2F;Color&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        )</span><br></pre></td></tr></table></figure>

<h1 id="二十四-项目实战"><a href="#二十四-项目实战" class="headerlink" title="二十四.项目实战"></a>二十四.项目实战</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">打包发布的时候  下载  </span><br><span class="line">运行打包后生成的项目build</span><br><span class="line">npm install -g serve</span><br><span class="line">serve build</span><br><span class="line"><span class="comment">//下载antd</span></span><br><span class="line">	yarn add antd</span><br><span class="line"><span class="comment">//mian.js引入</span></span><br><span class="line">	<span class="keyword">import</span> <span class="string">&#x27;antd/dist/antd.css&#x27;</span>;</span><br><span class="line"><span class="comment">//按需打包</span></span><br><span class="line">	参照官方文档</span><br><span class="line"><span class="comment">//自定义主题配置</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">less修改</span><br><span class="line">安装  yarn add less less-loader</span><br><span class="line">踩坑  对于eject报错的问题</span><br><span class="line">	git add .</span><br><span class="line">	git commit -m <span class="string">&#x27;init&#x27;</span></span><br><span class="line">	npm run eject</span><br><span class="line"></span><br><span class="line"><span class="number">465</span>行  sass-loader改为 less-loader</span><br><span class="line"></span><br><span class="line"><span class="comment">// style files regexes</span></span><br><span class="line"><span class="keyword">const</span> cssRegex = <span class="regexp">/\.css$/</span>;</span><br><span class="line"><span class="keyword">const</span> cssModuleRegex = <span class="regexp">/\.module\.css$/</span>;</span><br><span class="line"><span class="keyword">const</span> sassRegex = <span class="regexp">/\.(scss|less)$/</span>;</span><br><span class="line"><span class="keyword">const</span> sassModuleRegex = <span class="regexp">/\.module\.(scss|less)$/</span>;</span><br><span class="line"></span><br><span class="line">遇到问题无法yarn start</span><br><span class="line">之后  yarn add react-scripts   </span><br><span class="line"></span><br><span class="line">重新操作</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;登陆表单验证 </span><br><span class="line">&#x2F;&#x2F;声明式验证</span><br><span class="line">	form item里面</span><br><span class="line">    rules:[</span><br><span class="line">        &#123;required: true,message:&#39;&#39;&#125;,</span><br><span class="line">        &#123;min: 4,message:&#39;最小值不&#39;&#125;,</span><br><span class="line">        &#123;max: 12,message:&#39;&#39;&#125;,</span><br><span class="line">        &#123;pattern: &#x2F;^[a-zA-Z0-9_]+$&#x2F;,message:&#39;&#39;&#125;,</span><br><span class="line">    ]</span><br><span class="line">&#x2F;&#x2F;自定义验证</span><br><span class="line">	form item里面</span><br><span class="line">    rules:[</span><br><span class="line">        &#123;validator: this.valitdatePWD&#125;</span><br><span class="line">    ]</span><br><span class="line">    valitdatePWD &#x3D; (rule,value,callback)&#x3D;&gt;&#123;</span><br><span class="line">        callback()&#x2F;&#x2F;验证通过</span><br><span class="line">        callback(&#39;验证失败&#39;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="24-1加密"><a href="#24-1加密" class="headerlink" title="24.1加密"></a>24.1加密</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">yarn add crypto-js 或 npm install crypto-js</span><br><span class="line"><span class="comment">//MD5</span></span><br><span class="line"><span class="keyword">import</span> MD5 <span class="keyword">from</span> <span class="string">&#x27;crypto-js/md5&#x27;</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line">obj.username = MD5(<span class="built_in">this</span>.state.userinfo.username).toString()</span><br><span class="line">obj.password = MD5(<span class="built_in">this</span>.state.userinfo.password).toString()</span><br><span class="line"><span class="comment">//Hmac-MD5</span></span><br><span class="line">CryptoJS.HmacMD5(secret,pwd)</span><br><span class="line"><span class="comment">//AES</span></span><br><span class="line"><span class="keyword">const</span> key = CryptoJS.enc.Utf8.parse(<span class="string">&#x27;1234567812345678&#x27;</span>) <span class="comment">// 十六位十六进制数作为密钥</span></span><br><span class="line"><span class="keyword">const</span> iv = CryptoJS.enc.Utf8.parse(<span class="string">&quot;1234567812345678&quot;</span>);<span class="comment">//十六位十六进制数作为密钥偏移量</span></span><br><span class="line"><span class="comment">// 解密方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Decrypt</span>(<span class="params">word</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> decrypt = CryptoJS.AES.decrypt(word, key, &#123;</span><br><span class="line">        mode: CryptoJS.mode.ECB,</span><br><span class="line">        padding: CryptoJS.pad.Pkcs7</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">let</span> decryptedStr = decrypt.toString(CryptoJS.enc.Utf8)</span><br><span class="line">    <span class="keyword">return</span> decryptedStr.toString()</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 加密方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Encrypt</span>(<span class="params">word</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> encrypted = CryptoJS.AES.encrypt(word, key, &#123; </span><br><span class="line">        mode: CryptoJS.mode.ECB, </span><br><span class="line">        padding: CryptoJS.pad.Pkcs7 </span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> encrypted.toString()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用 jsencrypt 进行RSA加密</span></span><br><span class="line"><span class="keyword">import</span> JSEncrypt <span class="keyword">from</span> <span class="string">&#x27;jsencrypt&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> Encrypt = <span class="keyword">new</span> JSEncrypt();</span><br><span class="line"><span class="keyword">let</span> publicKey = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">publicKey += <span class="string">&#x27;-----BEGIN PUBLIC KEY-----&#x27;</span>;</span><br><span class="line">publicKey += <span class="string">&#x27;FJDLSKAJKLJ3L2J49FIDSAJFLKSDJAK32FKJDSAFJKDKFKDFJKDSLAFLSAFDKSAFKDASLFD&#x27;</span>;</span><br><span class="line">publicKey += <span class="string">&#x27;FJDLSKAJKLJ3L2J49FIDSAJFLKSDJAK32FKJDSAFJKDKFKDFJKDSLAFLSAFDKSAFKDASLFD&#x27;</span>;</span><br><span class="line">publicKey += <span class="string">&#x27;FJDLSKAJKLJ3L2J49FIDSAJFLKSDJAK32FKJDSAFJKDKFKDFJKDSLAFLSAFDKSAFKDASLFD&#x27;</span>;</span><br><span class="line">publicKey += <span class="string">&#x27;FJDLSKAJKLJ3L2J49FIDSAJF&#x27;</span>;</span><br><span class="line">publicKey += <span class="string">&#x27;-----END PUBLIC KEY-----&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 加密一个参数</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>value 需要加密的值</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">encrypt</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">    Encrypt.setPublicKey(publicKey);</span><br><span class="line">    <span class="keyword">return</span> Encrypt.encrypt(value);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//解密</span></span><br><span class="line">	npm install node-rsa --save</span><br><span class="line">    <span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> RSA = <span class="built_in">require</span>(<span class="string">&#x27;node-rsa&#x27;</span>);</span><br><span class="line"><span class="comment">// RSA解密</span></span><br><span class="line"><span class="keyword">const</span> keyPath = path.resolve(__dirname, <span class="string">&#x27;./pem/rsa_private_key.pem&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> privatePem = fs.readFileSync(keyPath).toString();</span><br><span class="line"><span class="keyword">const</span> privateKey = <span class="keyword">new</span> RSA(privatePem);</span><br><span class="line"><span class="comment">// 转成pkcs1格式</span></span><br><span class="line">privateKey.setOptions(&#123; <span class="attr">encryptionScheme</span>: <span class="string">&#x27;pkcs1&#x27;</span> &#125;);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 解密</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>value 需要解密的值</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">decrypt</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> data = value;</span><br><span class="line">    <span class="comment">// 使用try...catch...捕获解密失败错误（如公钥错误），返回controller处理</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      data = privateKey.decrypt(value, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//后台node目录结构</span></span><br><span class="line">   -- pem</span><br><span class="line">   		-- rsa_private_key.pem</span><br><span class="line">   		-- rsa_public_key.pem</span><br><span class="line">   -- rsa.js</span><br></pre></td></tr></table></figure>

<h2 id="24-2react实现权限控制"><a href="#24-2react实现权限控制" class="headerlink" title="24.2react实现权限控制"></a>24.2react实现权限控制</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.路由</span></span><br><span class="line"><span class="comment">//定义映射名称和组件</span></span><br><span class="line"><span class="keyword">const</span> mapper = &#123;</span><br><span class="line">  <span class="string">&quot;/admin/note&quot;</span>:note,</span><br><span class="line">  <span class="string">&quot;/admin/info&quot;</span>:info,</span><br><span class="line">  <span class="string">&quot;/admin/selfinfo&quot;</span>:selfinfo,</span><br><span class="line">  <span class="string">&quot;/admin/back&quot;</span>:back,</span><br><span class="line">  <span class="string">&quot;/admin/front&quot;</span>:front,</span><br><span class="line">  <span class="string">&quot;/admin/pic&quot;</span>:pic,</span><br><span class="line">  <span class="string">&quot;/admin/auth&quot;</span>:Auth,</span><br><span class="line">  <span class="string">&quot;/admin/article&quot;</span>:article,</span><br><span class="line">  <span class="string">&quot;/admin/tag&quot;</span>:tag,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//公有路由</span></span><br><span class="line"><span class="keyword">const</span> commonRoutes = [</span><br><span class="line">    &#123;</span><br><span class="line">      pathname: <span class="string">&quot;/login&quot;</span>,</span><br><span class="line">      component: Login,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      pathname: <span class="string">&quot;/404&quot;</span>,</span><br><span class="line">      component: NotFound,</span><br><span class="line">    &#125;</span><br><span class="line">];</span><br><span class="line"><span class="comment">//私有路由</span></span><br><span class="line"><span class="keyword">const</span> privateRoutes = [];</span><br><span class="line"><span class="keyword">var</span> routers = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">InitPrivate</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  State.AuthorityList.info.forEach(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(!element.isTop)&#123;</span><br><span class="line">        <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line">        obj.pathname = element.pathname;</span><br><span class="line">        obj.component = mapper[element.pathname]</span><br><span class="line">        privateRoutes.push(obj)</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        element.children.forEach(<span class="function"><span class="params">item</span> =&gt;</span>&#123;</span><br><span class="line">          <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line">          obj.pathname = item.pathname;</span><br><span class="line">          obj.component = mapper[item.pathname]</span><br><span class="line">          privateRoutes.push(obj)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.redux控制</span></span><br><span class="line">	<span class="comment">//index.js</span></span><br><span class="line">	<span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(props);</span><br><span class="line">        <span class="built_in">this</span>.state = store.getState();</span><br><span class="line">        store.subscribe(<span class="built_in">this</span>.storeChange);</span><br><span class="line">      &#125;</span><br><span class="line">      storeChange = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.setState(store.getState,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="built_in">this</span>.state)</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;;</span><br><span class="line">	<span class="comment">//action</span></span><br><span class="line">	<span class="keyword">export</span> <span class="keyword">const</span>  ToGetAuthority = <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">dispatch</span> =&gt;</span> &#123;</span><br><span class="line">    Authority(&#123; <span class="attr">username</span>:crypt.Decrypt(<span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;username&#x27;</span>)) &#125;).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> action = GetAuthority(res);</span><br><span class="line">      dispatch(action);</span><br><span class="line">    &#125;);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">const</span> GetAuthority = <span class="function">(<span class="params">value</span>) =&gt;</span> (&#123;</span><br><span class="line">        type: GET_AUTHORITY,</span><br><span class="line">        value</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//reducer</span></span><br><span class="line">    <span class="keyword">case</span> LOGIN_SUCCESS:</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">localStorage</span>.setItem(<span class="string">&quot;username&quot;</span>,action.value.username);</span><br><span class="line">    <span class="built_in">localStorage</span>.setItem(<span class="string">&quot;password&quot;</span>,action.value.password);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">case</span> GET_AUTHORITY:</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> newState = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(state))</span><br><span class="line">    newState.AuthorityList = action.value</span><br><span class="line">    <span class="built_in">localStorage</span>.setItem(<span class="string">&quot;AuthorityList&quot;</span>,<span class="built_in">JSON</span>.stringify(action.value));</span><br><span class="line">    <span class="keyword">return</span> newState;</span><br><span class="line">&#125;</span><br><span class="line">	<span class="comment">//渲染</span></span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<h2 id="25-3vscode注解插件"><a href="#25-3vscode注解插件" class="headerlink" title="25.3vscode注解插件"></a>25.3vscode注解插件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">KoroFileHeader  </span><br><span class="line">&#x2F;&#x2F;配置</span><br><span class="line">https:&#x2F;&#x2F;www.cnblogs.com&#x2F;suRimn&#x2F;p&#x2F;10450372.html</span><br><span class="line">（1）文件头部注释</span><br><span class="line">快捷键：crtl+alt+i（window）,ctrl+cmd+t (mac)</span><br><span class="line">（2）函数注释</span><br><span class="line">快捷键：ctrl+alt+t (window), ctrl+alt+t(mac)</span><br></pre></td></tr></table></figure>

<h2 id="25-4路由权限"><a href="#25-4路由权限" class="headerlink" title="25.4路由权限"></a>25.4路由权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">最重要的点是Route组建里面用render属性替换component来渲染页面</span><br><span class="line">&lt;Route</span><br><span class="line">  path&#x3D;&#123;item.pathname&#125; key&#x3D;&#123;index&#125;</span><br><span class="line">   render &#x3D; &#123;</span><br><span class="line">    () &#x3D;&gt;&#123;</span><br><span class="line">   return (this.state.token ? (item.auth ? (&lt;item.Component &#x2F;&gt;) : (&lt;Redirect to&#x3D;&#123;&#123;pathname:&#39;&#x2F;toAuth&#39;&#125;&#125;&#x2F;&gt;))</span><br><span class="line">  :(&lt;Redirect to&#x3D;&#123;&#123;pathname:&#39;&#x2F;login&#39;,query :&#123; operate : &#39;tologin&#39; &#125;&#125;&#125;&#x2F;&gt;)</span><br><span class="line">           )</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &gt;&lt;&#x2F;Route&gt;</span><br><span class="line">        &#x2F;&#x2F;路由权限</span><br><span class="line">        &lt;Route</span><br><span class="line">            path&#x3D;&#123;item.pathname&#125;</span><br><span class="line">            key&#x3D;&#123;index&#125;</span><br><span class="line">            render &#x3D; &#123;</span><br><span class="line">                () &#x3D;&gt;&#123;</span><br><span class="line">                    var Temp &#x3D; item.component</span><br><span class="line">                    return !item.auth ? (&lt;Temp&#x2F;&gt;) : (&lt;Redirect to&#x3D;&quot;&#x2F;toAuth&quot;&#x2F;&gt;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            &#x2F;&#x2F; component&#x3D;&#123;item.component&#125;</span><br><span class="line">            &gt;&lt;&#x2F;Route&gt;</span><br></pre></td></tr></table></figure>



<h2 id="25-5-token验证"><a href="#25-5-token验证" class="headerlink" title="25.5 token验证"></a>25.5 token验证</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">安装 ActivePerl https:<span class="comment">//www.activestate.com/activeperl/downloads</span></span><br><span class="line">安装 OpenSSl http:<span class="comment">//slproweb.com/products/Win32OpenSSL.html</span></span><br><span class="line">在 ras 文件 终端夹下输入 openssl</span><br><span class="line">生成私钥</span><br><span class="line"><span class="comment">//token.js</span></span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>)</span><br><span class="line"><span class="comment">// 创建 token 类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Jwt</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">data</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//生成token</span></span><br><span class="line">    <span class="function"><span class="title">generateToken</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="built_in">this</span>.data</span><br><span class="line">        <span class="keyword">let</span> created = <span class="built_in">Math</span>.floor(<span class="built_in">Date</span>.now() / <span class="number">1000</span>)</span><br><span class="line">        <span class="keyword">let</span> cert = fs.readFileSync(path.join(__dirname, <span class="string">&#x27;./pem/private_key.pem&#x27;</span>)) <span class="comment">// 私钥</span></span><br><span class="line">        <span class="keyword">let</span> token = jwt.sign(&#123;</span><br><span class="line">            data,</span><br><span class="line">            exp: created + <span class="number">60</span> * <span class="number">30</span>,</span><br><span class="line">        &#125;, cert, &#123;<span class="attr">algorithm</span>: <span class="string">&#x27;RS256&#x27;</span>&#125;)</span><br><span class="line">        <span class="keyword">return</span> token</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 校验token</span></span><br><span class="line">    <span class="function"><span class="title">verifyToken</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> token = <span class="built_in">this</span>.data</span><br><span class="line">        <span class="keyword">let</span> cert = fs.readFileSync(path.join(__dirname, <span class="string">&#x27;./pem/public_key.pem&#x27;</span>)) <span class="comment">// 公钥</span></span><br><span class="line">        <span class="keyword">let</span> res</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> result = jwt.verify(token, cert, &#123;<span class="attr">algorithms</span>: [<span class="string">&#x27;RS256&#x27;</span>]&#125;) || &#123;&#125;</span><br><span class="line">            <span class="keyword">let</span> &#123;exp = <span class="number">0</span>&#125; = result, current = <span class="built_in">Math</span>.floor(<span class="built_in">Date</span>.now() / <span class="number">1000</span>)</span><br><span class="line">            <span class="keyword">if</span> (current &lt;= exp) &#123;</span><br><span class="line">                res = result.data || &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            res = <span class="string">&#x27;err&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = Jwt</span><br><span class="line"></span><br><span class="line"><span class="comment">//login.js</span></span><br><span class="line"> <span class="comment">//生成token</span></span><br><span class="line"><span class="keyword">let</span> jwt = <span class="keyword">new</span> Jwt(username)</span><br><span class="line"><span class="keyword">let</span> token = jwt.generateToken()</span><br><span class="line">obj.success = <span class="string">&quot;success&quot;</span>;</span><br><span class="line">obj.token = token</span><br><span class="line"><span class="comment">//app.js</span></span><br><span class="line"><span class="comment">//token验证中间件</span></span><br><span class="line">app.use(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (req.url !== <span class="string">&#x27;/&#x27;</span> &amp;&amp; req.url !== <span class="string">&#x27;/login&#x27;</span> )&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(req)</span><br><span class="line">    <span class="keyword">let</span> jwt = <span class="keyword">new</span> Jwt(token)</span><br><span class="line">    <span class="keyword">let</span> result = jwt.verifyToken()</span><br><span class="line">    <span class="built_in">console</span>.log(result)</span><br><span class="line">    <span class="keyword">if</span> (result === <span class="string">&#x27;err&#x27;</span>) &#123;</span><br><span class="line">        res.status(<span class="number">401</span>).send(&#123;<span class="attr">msg</span>: <span class="string">&#x27;请求未授权，请重新登录&#x27;</span>&#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        next()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//前端redux</span></span><br></pre></td></tr></table></figure>

<h2 id="25-6React中使用可视化"><a href="#25-6React中使用可视化" class="headerlink" title="25.6React中使用可视化"></a>25.6React中使用可视化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">bizcharts  </span><br><span class="line">cnpm i bizcharts --save</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; &#123;</span><br><span class="line">          $project: &#123;</span><br><span class="line">              &#x2F;&#x2F;只有被设置进去的字段才会显示出来，其他列就不会被显示。</span><br><span class="line">            day : &#123;$substr: [&#123;&quot;$add&quot;:[&quot;$create_time&quot;, 28800000]&#125;, 0, 7] &#125;,</span><br><span class="line">            view: 1,</span><br><span class="line">            commets:1,</span><br><span class="line">            uid:1</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            $match:&#123;</span><br><span class="line">                uid:uid</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            $group:&#123;</span><br><span class="line">                _id:&quot;$day&quot;,</span><br><span class="line">                totalViews:&#123;$sum: &quot;$view&quot;&#125;, &#x2F;&#x2F;统计price</span><br><span class="line">                totalComments:&#123;$sum: &quot;$commets&quot;&#125;, &#x2F;&#x2F;统计price</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">            &#x2F;&#x2F;统计总的评论数量和浏览数量</span><br></pre></td></tr></table></figure>

<h2 id="25-7打包部署"><a href="#25-7打包部署" class="headerlink" title="25.7打包部署"></a>25.7打包部署</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">体积优化  <span class="comment">//webpack.config.js</span></span><br><span class="line"> <span class="comment">// devtool: isEnvProduction</span></span><br><span class="line">    <span class="comment">//   ? shouldUseSourceMap</span></span><br><span class="line">    <span class="comment">//     ? &#x27;source-map&#x27;</span></span><br><span class="line">    <span class="comment">//     : false</span></span><br><span class="line">    <span class="comment">//   : isEnvDevelopment &amp;&amp; &#x27;cheap-module-source-map&#x27;,</span></span><br><span class="line">    devtool:<span class="literal">false</span>,</span><br><span class="line">        </span><br><span class="line">yarn <span class="built_in">global</span> add serve</span><br><span class="line">cnpm install -g serve</span><br><span class="line">serve -s build  </span><br><span class="line">http:<span class="comment">//localhost:5000/#/login</span></span><br><span class="line">        </span><br><span class="line">HashRouter与BrowserRouter的异同</span><br><span class="line">项目中控制路由跳转使用的是BrowserRouter。</span><br><span class="line">在开发过程中使用是没有问题的，但是将页面上传至服务器之后，问题就来了：用户访问的资源不存在，页面是空白的，就像上面。</span><br><span class="line">原因：</span><br><span class="line">在browserHistory 模式下，URL 是指向真实 URL 的资源路径，当通过真实 URL 访问网站的时候，由于路径是指向服务器的真实路径，但该路径下并没有相关资源，所以用户访问的资源不存在。</span><br><span class="line">解决</span><br><span class="line">将BrowserRouter 改为 HashRouter</span><br></pre></td></tr></table></figure>

<h1 id="26-React-TS构建"><a href="#26-React-TS构建" class="headerlink" title="26.React+TS构建"></a>26.React+TS构建</h1><h2 id="26-1初始化项目"><a href="#26-1初始化项目" class="headerlink" title="26.1初始化项目"></a>26.1初始化项目</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app antd-demo-ts --typescript</span><br><span class="line">yarn create react-app antd-demo-ts --template typescript</span><br><span class="line"></span><br><span class="line">安装TS插件</span><br><span class="line">TypeScript Importer</span><br></pre></td></tr></table></figure>

<h2 id="26-2简单数据传递"><a href="#26-2简单数据传递" class="headerlink" title="26.2简单数据传递"></a>26.2简单数据传递</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IProps&#123;<span class="comment">//接口必须I开头</span></span><br><span class="line">    title:<span class="built_in">string</span>,</span><br><span class="line">    age:<span class="built_in">number</span>,</span><br><span class="line">    work?:<span class="built_in">string</span><span class="comment">//可选项</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span>&lt;<span class="title">IProps</span>,<span class="title">any</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="title">constructor</span>(<span class="params">props:<span class="built_in">any</span></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(props)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &#123;<span class="built_in">this</span>.props.title&#125;</span><br><span class="line">            &#123;<span class="built_in">this</span>.props.age&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="26-3简单状态管理"><a href="#26-3简单状态管理" class="headerlink" title="26.3简单状态管理"></a>26.3简单状态管理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public changeCount()&#123;</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">            count:2000</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">public readonly state: Readonly&lt;IState&gt; &#x3D; &#123;&#x2F;&#x2F;只读</span><br><span class="line">    count:100</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default class Hello extends React.Component&lt;IProps,IState&gt;&#123;&#x2F;&#x2F;第一个泛型为props 第二个泛型为state</span><br></pre></td></tr></table></figure>

<h2 id="26-4父子事件"><a href="#26-4父子事件" class="headerlink" title="26.4父子事件"></a>26.4父子事件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">class App extends React.Component&#123;</span><br><span class="line"></span><br><span class="line">  public myClick(data:string)&#123;</span><br><span class="line">    console.log(data)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public render()&#123;</span><br><span class="line">    return(</span><br><span class="line">      &lt;div className&#x3D;&quot;App&quot;&gt;</span><br><span class="line">      &lt;Hello title&#x3D;&quot;打撒打撒阿德飒飒&quot; age&#x3D;&#123;18&#125; onMyClick&#x3D;&#123;(data:any)&#x3D;&gt;&#123; 		    this.myClick(data) &#125;&#125; &gt;&lt;&#x2F;Hello&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;子事件</span><br><span class="line">interface IProps&#123;&#x2F;&#x2F;接口必须I开头</span><br><span class="line">    title:string,</span><br><span class="line">    age:number,</span><br><span class="line">    work?:string&#x2F;&#x2F;可选项</span><br><span class="line">    onMyClick:any</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F;通过接口申明state</span><br><span class="line">interface IState&#123;</span><br><span class="line">    count:number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default class Hello extends React.Component&lt;IProps,IState&gt;&#123;&#x2F;&#x2F;第一个泛型为props 第二个泛型为state</span><br><span class="line">    public constructor(props:IProps)&#123;</span><br><span class="line">        super(props);</span><br><span class="line">        </span><br><span class="line">        this.changeCount &#x3D; this.changeCount.bind(this);&#x2F;&#x2F;改变this指向</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public readonly state: Readonly&lt;IState&gt; &#x3D; &#123;&#x2F;&#x2F;只读</span><br><span class="line">            count:100</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;修改事件</span><br><span class="line">    public changeCount()&#123;</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">            count:2000</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    public sendParentMessage()&#123;</span><br><span class="line">        this.props.onMyClick(&quot;child message&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    public render()&#123;</span><br><span class="line">        return(</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &#123;this.props.title&#125;&lt;br&#x2F;&gt;</span><br><span class="line">            &#123;this.props.age&#125;&lt;br&#x2F;&gt;</span><br><span class="line">            &#123;this.state.count&#125;&lt;br&#x2F;&gt;</span><br><span class="line">            &lt;button onClick&#x3D;&#123;()&#x3D;&gt;this.changeCount()&#125;&gt;按钮&lt;&#x2F;button&gt;</span><br><span class="line">            &lt;button onClick&#x3D;&#123;()&#x3D;&gt;this.sendParentMessage()&#125;&gt;向父级发送&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="27-项目源码阅读"><a href="#27-项目源码阅读" class="headerlink" title="27.项目源码阅读"></a>27.项目源码阅读</h1><h2 id="1-Hooks-TS"><a href="#1-Hooks-TS" class="headerlink" title="1.Hooks + TS"></a>1.Hooks + TS</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">React.FC&lt;&gt;的在typescript使用的一个泛型，FC就是FunctionComponent的缩写，是函数组件，在这个泛型里面可以使用useState，个人觉得useState挺好用的</span><br></pre></td></tr></table></figure>

<h1 id="28-Umi-Dva"><a href="#28-Umi-Dva" class="headerlink" title="28.Umi+Dva"></a>28.Umi+Dva</h1><h2 id="28-1dva介绍"><a href="#28-1dva介绍" class="headerlink" title="28.1dva介绍"></a>28.1dva介绍</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Dva是将redux redux-sage react-router fetch 进行一个整合</span><br><span class="line">dva 首先是一个基于 redux 和 redux-saga 的数据流方案，然后为了简化开发体验，dva 还额外内置了 react-router 和 fetch，所以也可以理解为一个轻量级的应用框架。</span><br></pre></td></tr></table></figure>

<h2 id="28-2Umi介绍"><a href="#28-2Umi介绍" class="headerlink" title="28.2Umi介绍"></a>28.2Umi介绍</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Umi，中文可发音为乌米，是可扩展的企业级前端应用框架。Umi 以路由为基础的，同时支持配置式路由和约定式路由，保证路由的功能完备，并以此进行功能扩展。然后配以生命周期完善的插件体系，覆盖从源码到构建产物的每个生命周期，支持各种功能扩展和业务需求</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">yarn create @umijs&#x2F;umi-app  创建dva</span><br><span class="line">yarn 运行</span><br></pre></td></tr></table></figure>

<h2 id="28-3Umi路由"><a href="#28-3Umi路由" class="headerlink" title="28.3Umi路由"></a>28.3Umi路由</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">配置路由</span><br><span class="line"></span><br><span class="line">在配置文件中通过 routes 进行配置，格式为路由信息的数组。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123; <span class="attr">exact</span>: <span class="literal">true</span>, <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;index&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">exact</span>: <span class="literal">true</span>, <span class="attr">path</span>: <span class="string">&#x27;/user&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;user&#x27;</span> &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">如果没有 routes 配置，Umi 会进入约定式路由模式，然后分析 src/pages 目录拿到路由配置。</span><br><span class="line">[</span><br><span class="line">  &#123; <span class="attr">exact</span>: <span class="literal">true</span>, <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;@/pages/index&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">exact</span>: <span class="literal">true</span>, <span class="attr">path</span>: <span class="string">&#x27;/users&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;@/pages/users&#x27;</span> &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="28-4Model"><a href="#28-4Model" class="headerlink" title="28.4Model"></a>28.4Model</h2><p>//手写model</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Descripttion: </span></span><br><span class="line"><span class="comment"> * @Author: mikasa</span></span><br><span class="line"><span class="comment"> * @Date: 2020-11-29 11:29:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> &#123;Reducer,Effect,Subscription&#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; getRemoteList &#125; <span class="keyword">from</span> <span class="string">&#x27;./service&#x27;</span></span><br><span class="line">interface UserModelType&#123;<span class="comment">//约束</span></span><br><span class="line">    namespace:<span class="string">&#x27;users&#x27;</span>,</span><br><span class="line">    state:&#123;&#125;,</span><br><span class="line">    reducers:&#123;</span><br><span class="line">        getList:Reducer</span><br><span class="line">    &#125;,</span><br><span class="line">    effects:&#123;</span><br><span class="line">        getRemote:Effect</span><br><span class="line">    &#125;,</span><br><span class="line">    subscriptions:&#123;</span><br><span class="line">		setup:Subscription</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> UserModel:UserModelType = &#123;</span><br><span class="line">    namespace:<span class="string">&#x27;users&#x27;</span>,<span class="comment">//命名空间</span></span><br><span class="line">    state:&#123;&#125;,<span class="comment">//初始值</span></span><br><span class="line">    reducers:&#123;<span class="comment">//同步</span></span><br><span class="line">        <span class="function"><span class="title">getList</span>(<span class="params">state,&#123;payload&#125;</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> payload</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    effects:&#123;<span class="comment">//异步</span></span><br><span class="line">        *<span class="function"><span class="title">getRemote</span>(<span class="params">&#123;payload&#125;,&#123;put,call&#125;</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">const</span> data = <span class="keyword">yield</span> call(getRemoteList)</span><br><span class="line">            <span class="keyword">yield</span> put(&#123;</span><br><span class="line">                type:<span class="string">&#x27;getList&#x27;</span>,</span><br><span class="line">                payload:data</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    subscriptions:&#123;<span class="comment">//订阅</span></span><br><span class="line">    	<span class="function"><span class="title">setup</span>(<span class="params">&#123;dispatch,history&#125;,done</span>)</span>&#123;</span><br><span class="line">            history.listen(<span class="function">(<span class="params">location,action</span>)=&gt;</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(location.pathname === <span class="string">&#x27;/users&#x27;</span>)&#123;</span><br><span class="line">                    dispatch(&#123;</span><br><span class="line">                        type:<span class="string">&#x27;getRemote&#x27;</span></span><br><span class="line">                    &#125;)         </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> UserModel</span><br></pre></td></tr></table></figure>

<p>service.ts</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; request &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getRemoteList = <span class="keyword">async</span> params =&gt;&#123;</span><br><span class="line">    <span class="keyword">return</span> request(<span class="string">&#x27;http://public-api-v1.aspirantzhang.com/users&#x27;</span>,&#123;</span><br><span class="line">        method:<span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        params:&#123;<span class="attr">page</span>:<span class="number">1</span>&#125;</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>index.tsc</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params">&#123;users&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div className=<span class="string">&#x27;list-table&#x27;</span>&gt;</span><br><span class="line">            &lt;Table columns=&#123;columns&#125; dataSource=&#123;users.data&#125;/&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">&#123;users&#125;</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        users</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps)(index)</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">mikasa</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/11/30/react/">http://yoursite.com/2020/11/30/react/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">mikasa</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2431606259,2554064138&amp;fm=26&amp;gp=0.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2020/11/30/react_Native/"><img class="prev-cover" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=138416375,3718598577&amp;fm=26&amp;gp=0.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">React Native</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/index/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">mikasa</div><div class="author-info__description">Java,JavaScript,Node,Json,Sql,前端,数据库,后端</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">57</div></a></div><div class="card-info-data-item is-center"><a href="/source/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/zcz147258"><i class="fab fa-github"></i><span>Follow Me</span></a></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">有缘人哦吼！</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80-react%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">一.react简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C-React%E5%92%8Cvue%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-number">2.</span> <span class="toc-text">二.React和vue的对比</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89-%E8%99%9A%E6%8B%9FDom"><span class="toc-number">3.</span> <span class="toc-text">三.虚拟Dom</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1DOM%E6%A0%91%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">3.1.</span> <span class="toc-text">3.1DOM树的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2%E8%99%9A%E6%8B%9FDOM"><span class="toc-number">3.2.</span> <span class="toc-text">3.2虚拟DOM</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B-DIff%E7%AE%97%E6%B3%95"><span class="toc-number">4.</span> <span class="toc-text">四.DIff算法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94-%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8react"><span class="toc-number">5.</span> <span class="toc-text">五.在项目中使用react</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD-JSX"><span class="toc-number">6.</span> <span class="toc-text">六.JSX</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1%E8%AF%AD%E6%B3%95"><span class="toc-number">6.1.</span> <span class="toc-text">6.1语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2KEY"><span class="toc-number">6.2.</span> <span class="toc-text">6.2KEY</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">6.3.</span> <span class="toc-text">6.3注意事项</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83-%E5%B1%95%E5%BC%80%E8%BF%90%E7%AE%97%E7%AC%A6%E2%80%A6"><span class="toc-number">7.</span> <span class="toc-text">七 展开运算符…</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB-%E7%BB%84%E4%BB%B6%E5%8C%96"><span class="toc-number">8.</span> <span class="toc-text">八.组件化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1%E7%AC%AC%E4%BA%8C%E7%A7%8D%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6%E6%96%B9%E5%BC%8Fclass"><span class="toc-number">8.1.</span> <span class="toc-text">8.1第二种创建组件方式class</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0%E5%92%8C%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6"><span class="toc-number">8.2.</span> <span class="toc-text">8.2高阶函数和高阶组件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%9D-%E6%A0%B7%E5%BC%8F"><span class="toc-number">9.</span> <span class="toc-text">九.样式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81-%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6"><span class="toc-number">10.</span> <span class="toc-text">十.绑定事件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%80-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">11.</span> <span class="toc-text">十一.生命周期</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C-%E8%84%9A%E6%89%8B%E6%9E%B6%E5%88%9B%E5%BB%BA"><span class="toc-number">12.</span> <span class="toc-text">十二.脚手架创建</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%89-%E4%BD%BF%E7%94%A8axios"><span class="toc-number">13.</span> <span class="toc-text">十三.使用axios</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E5%9B%9B-%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-number">14.</span> <span class="toc-text">十四.组件之间的通信</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%BA%94-React-Router"><span class="toc-number">15.</span> <span class="toc-text">十五.React-Router</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#15-1%E8%B7%AF%E7%94%B1%E7%AE%80%E4%BB%8B"><span class="toc-number">15.1.</span> <span class="toc-text">15.1路由简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-2%E8%B7%AF%E7%94%B1%E4%BD%BF%E7%94%A8"><span class="toc-number">15.2.</span> <span class="toc-text">15.2路由使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-3%E8%B7%AF%E7%94%B1%E5%B5%8C%E5%A5%97"><span class="toc-number">15.3.</span> <span class="toc-text">15.3路由嵌套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-4%E5%90%91%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE"><span class="toc-number">15.4.</span> <span class="toc-text">15.4向路由组件传递数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-5%E5%AE%8C%E6%95%B4%E7%9A%84%E4%B9%A6%E5%86%99%E8%B7%AF%E7%94%B1%E6%96%B9%E5%BC%8F"><span class="toc-number">15.5.</span> <span class="toc-text">15.5完整的书写路由方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-6%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%80%BC%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">15.6.</span> <span class="toc-text">15.6路由传值的区别和使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E5%85%AD-material-ui%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">16.</span> <span class="toc-text">十六.material-ui的使用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%83-%E6%89%93%E5%8C%85"><span class="toc-number">17.</span> <span class="toc-text">十七.打包</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E5%85%AB-%E5%9D%91"><span class="toc-number">18.</span> <span class="toc-text">十八.坑</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B9%9D-ui%E5%BA%93"><span class="toc-number">19.</span> <span class="toc-text">十九.ui库</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E5%8D%81-redux"><span class="toc-number">20.</span> <span class="toc-text">二十.redux</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#20-1redux%E6%A0%B8%E5%BF%83api"><span class="toc-number">20.1.</span> <span class="toc-text">20.1redux核心api</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-2redux%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-number">20.2.</span> <span class="toc-text">20.2redux的核心概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-3%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8"><span class="toc-number">20.3.</span> <span class="toc-text">20.3开始使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E5%8D%81%E4%B8%80-Antd-%E5%8A%A0-react"><span class="toc-number">21.</span> <span class="toc-text">二十一.Antd 加 react</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#21-1%E5%BC%80%E5%90%AF%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-number">21.1.</span> <span class="toc-text">21.1开启装饰器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-2%E5%AE%89%E8%A3%85antd"><span class="toc-number">21.2.</span> <span class="toc-text">21.2安装antd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-3%E5%AE%89%E8%A3%85react%E7%94%9F%E6%80%81"><span class="toc-number">21.3.</span> <span class="toc-text">21.3安装react生态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-4%E9%BB%98%E8%AE%A4%E8%8B%B1%E6%96%87%E8%BD%AC%E5%8C%96"><span class="toc-number">21.4.</span> <span class="toc-text">21.4默认英文转化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-5%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%92%E5%92%8C%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="toc-number">21.5.</span> <span class="toc-text">21.5路由规划和懒加载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-6axios"><span class="toc-number">21.6.</span> <span class="toc-text">21.6axios</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-7-%E5%AF%B9%E8%B1%A1%E8%BF%94%E5%9B%9E%E6%A0%87%E7%AD%BE%E5%86%85%E5%AE%B9"><span class="toc-number">21.7.</span> <span class="toc-text">21.7.对象返回标签内容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-8-%E6%A0%87%E9%A2%98%E9%9A%8F%E7%9D%80%E5%86%85%E5%AE%B9%E5%8F%98%E5%8C%96"><span class="toc-number">21.8.</span> <span class="toc-text">21.8.标题随着内容变化</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E5%8D%81%E4%BA%8C-Redux"><span class="toc-number">22.</span> <span class="toc-text">二十二.Redux</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#22-1Redux%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-number">22.1.</span> <span class="toc-text">22.1Redux的工作流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-2redux-dev"><span class="toc-number">22.2.</span> <span class="toc-text">22.2redux dev</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-3%E6%B5%81%E7%A8%8B"><span class="toc-number">22.3.</span> <span class="toc-text">22.3流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-4%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">22.4.</span> <span class="toc-text">22.4注意事项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-5%E7%BB%84%E4%BB%B6UI%E5%92%8C%E9%80%BB%E8%BE%91%E9%83%A8%E5%88%86%E7%9A%84%E6%8B%86%E5%88%86"><span class="toc-number">22.5.</span> <span class="toc-text">22.5组件UI和逻辑部分的拆分</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-6%E6%97%A0%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">22.6.</span> <span class="toc-text">22.6无状态组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-7axios%E5%92%8Credux%E7%9A%84%E7%BB%93%E5%90%88"><span class="toc-number">22.7.</span> <span class="toc-text">22.7axios和redux的结合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-8%E4%B8%AD%E9%97%B4%E4%BB%B6Redux-thunk"><span class="toc-number">22.8.</span> <span class="toc-text">22.8中间件Redux-thunk</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-9%E4%B8%AD%E9%97%B4%E4%BB%B6Redux-saga"><span class="toc-number">22.9.</span> <span class="toc-text">22.9中间件Redux-saga</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-10React-Redux"><span class="toc-number">22.10.</span> <span class="toc-text">22.10React-Redux</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E5%8D%81%E4%B8%89-React-hooks"><span class="toc-number">23.</span> <span class="toc-text">二十三.React_hooks</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#23-1UseState"><span class="toc-number">23.1.</span> <span class="toc-text">23.1UseState</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-2UseEffect"><span class="toc-number">23.2.</span> <span class="toc-text">23.2UseEffect</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-3useContext"><span class="toc-number">23.3.</span> <span class="toc-text">23.3useContext</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-4userReducer"><span class="toc-number">23.4.</span> <span class="toc-text">23.4userReducer</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E5%8D%81%E5%9B%9B-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98"><span class="toc-number">24.</span> <span class="toc-text">二十四.项目实战</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#24-1%E5%8A%A0%E5%AF%86"><span class="toc-number">24.1.</span> <span class="toc-text">24.1加密</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-2react%E5%AE%9E%E7%8E%B0%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="toc-number">24.2.</span> <span class="toc-text">24.2react实现权限控制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-3vscode%E6%B3%A8%E8%A7%A3%E6%8F%92%E4%BB%B6"><span class="toc-number">24.3.</span> <span class="toc-text">25.3vscode注解插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-4%E8%B7%AF%E7%94%B1%E6%9D%83%E9%99%90"><span class="toc-number">24.4.</span> <span class="toc-text">25.4路由权限</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-5-token%E9%AA%8C%E8%AF%81"><span class="toc-number">24.5.</span> <span class="toc-text">25.5 token验证</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-6React%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-number">24.6.</span> <span class="toc-text">25.6React中使用可视化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-7%E6%89%93%E5%8C%85%E9%83%A8%E7%BD%B2"><span class="toc-number">24.7.</span> <span class="toc-text">25.7打包部署</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#26-React-TS%E6%9E%84%E5%BB%BA"><span class="toc-number">25.</span> <span class="toc-text">26.React+TS构建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#26-1%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE"><span class="toc-number">25.1.</span> <span class="toc-text">26.1初始化项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#26-2%E7%AE%80%E5%8D%95%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92"><span class="toc-number">25.2.</span> <span class="toc-text">26.2简单数据传递</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#26-3%E7%AE%80%E5%8D%95%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-number">25.3.</span> <span class="toc-text">26.3简单状态管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#26-4%E7%88%B6%E5%AD%90%E4%BA%8B%E4%BB%B6"><span class="toc-number">25.4.</span> <span class="toc-text">26.4父子事件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#27-%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB"><span class="toc-number">26.</span> <span class="toc-text">27.项目源码阅读</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Hooks-TS"><span class="toc-number">26.1.</span> <span class="toc-text">1.Hooks + TS</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#28-Umi-Dva"><span class="toc-number">27.</span> <span class="toc-text">28.Umi+Dva</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#28-1dva%E4%BB%8B%E7%BB%8D"><span class="toc-number">27.1.</span> <span class="toc-text">28.1dva介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#28-2Umi%E4%BB%8B%E7%BB%8D"><span class="toc-number">27.2.</span> <span class="toc-text">28.2Umi介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#28-3Umi%E8%B7%AF%E7%94%B1"><span class="toc-number">27.3.</span> <span class="toc-text">28.3Umi路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#28-4Model"><span class="toc-number">27.4.</span> <span class="toc-text">28.4Model</span></a></li></ol></li></ol></div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/01/16/gulp/" title="Gulp打包"><img src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4045737814,934960022&amp;fm=26&amp;gp=0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Gulp打包"/></a><div class="content"><a class="title" href="/2021/01/16/gulp/" title="Gulp打包">Gulp打包</a><time datetime="2021-01-16T02:30:11.932Z" title="发表于 2021-01-16 10:30:11">2021-01-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/18/proto%E5%9C%A8socket_io%E7%9A%84%E5%BA%94%E7%94%A8/" title="proto在socket_io的应用"><img src="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=4234896097,4021899470&amp;fm=26&amp;gp=0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="proto在socket_io的应用"/></a><div class="content"><a class="title" href="/2020/12/18/proto%E5%9C%A8socket_io%E7%9A%84%E5%BA%94%E7%94%A8/" title="proto在socket_io的应用">proto在socket_io的应用</a><time datetime="2020-12-18T05:47:05.179Z" title="发表于 2020-12-18 13:47:05">2020-12-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/16/generator%E5%92%8Citerator/" title="generator和iterator"><img src="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=4234896097,4021899470&amp;fm=26&amp;gp=0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="generator和iterator"/></a><div class="content"><a class="title" href="/2020/12/16/generator%E5%92%8Citerator/" title="generator和iterator">generator和iterator</a><time datetime="2020-12-16T03:42:48.398Z" title="发表于 2020-12-16 11:42:48">2020-12-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/16/js%E5%8A%A0%E8%A7%A3%E5%AF%86crypto.js/" title="js加解密"><img src="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=4234896097,4021899470&amp;fm=26&amp;gp=0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="js加解密"/></a><div class="content"><a class="title" href="/2020/12/16/js%E5%8A%A0%E8%A7%A3%E5%AF%86crypto.js/" title="js加解密">js加解密</a><time datetime="2020-12-16T03:41:57.061Z" title="发表于 2020-12-16 11:41:57">2020-12-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/16/js%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84%E6%8E%92%E5%BA%8F/" title="js对象数组排序"><img src="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=4234896097,4021899470&amp;fm=26&amp;gp=0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="js对象数组排序"/></a><div class="content"><a class="title" href="/2020/12/16/js%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84%E6%8E%92%E5%BA%8F/" title="js对象数组排序">js对象数组排序</a><time datetime="2020-12-16T03:40:27.119Z" title="发表于 2020-12-16 11:40:27">2020-12-16</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By mikasa</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">簡</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: 'BzB1So5EWrOm2CUDceS299It-gzGzoHsz',
      appKey: 'Ul1N9MAsFqovsupOVB5eoJee',
      placeholder: '记得留下你的暱称和邮箱....可以快速收到回復',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
    }

    if (true) { 
      initData.requiredFields= ('nick,mail'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign({}, initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(() => loadValine(), 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div class="aplayer no-destroy" data-id="2484225391" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config_change',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  if (typeof gtag === 'function') {
    gtag('config', '', {'page_path': window.location.pathname});
  }

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})</script></div></body></html>